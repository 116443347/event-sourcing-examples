{"version":3,"sources":["webpack:///./src/client.js?","webpack:///./src/app.js?","webpack:///./~/redux-router/server.js?","webpack:///./~/redux-router/lib/server.js?","webpack:///./~/redux-router/lib/matchMiddleware.js?","webpack:///./src/reducers/index.js?","webpack:///./src/reducers/auth/index.js?","webpack:///./src/reducers/auth/configure.js?","webpack:///./src/constants/ACTION_TYPES.js?","webpack:///./src/utils/defineActionTypes.js?","webpack:///./src/reducers/createDataReducer.js?","webpack:///./src/reducers/auth/authenticate.js?","webpack:///./src/reducers/auth/signin.js?","webpack:///./src/reducers/createFormReducer.js?","webpack:///./src/reducers/auth/signup.js?","webpack:///./src/reducers/auth/signout.js?","webpack:///./src/reducers/auth/user.js?","webpack:///./src/reducers/data/index.js?","webpack:///./src/reducers/data/accounts.js?","webpack:///./src/reducers/data/transfers.js?","webpack:///./src/reducers/data/entities.js?","webpack:///./src/reducers/data/bookmarkAccount.js?","webpack:///./src/reducers/ui/index.js?","webpack:///./src/reducers/ui/account.js?","webpack:///./src/reducers/ui/errors.js?","webpack:///./src/reducers/ui/bookmarkAccount.js?","webpack:///./src/reducers/ui/transfersMake.js?","webpack:///./src/actions/configure.js?","webpack:///./src/utils/constants.js?","webpack:///./src/actions/authenticate.js?","webpack:///./src/utils/actions.js?","webpack:///./src/utils/sessionStorage.js?","webpack:///./src/utils/root.js?","webpack:///./src/utils/api.js?","webpack:///./src/utils/fetch.js?","webpack:///./src/utils/handleFetchResponse.js?","webpack:///./src/actions/entities.js?","webpack:///./src/utils/clientSettings.js?","webpack:///./src/utils/parseEndpointConfig.js?","webpack:///./src/utils/parseUrl.js?","webpack:///./src/components/AuthComponent.js?","webpack:///./src/utils/readProp.js?","webpack:///./src/components/partials/Container.js?","webpack:///./src/components/HeaderLinks.js?","webpack:///./src/actions/signOut.js?","webpack:///./src/views/MyAccounts.js?","webpack:///./src/views/modals/index.js?","webpack:///./src/views/modals/Add3rdPartyAccountModal.js?","webpack:///./src/controls/bootstrap/ButtonLoader.js?","webpack:///./src/controls/bootstrap/Input.js?","webpack:///./src/controls/bootstrap/AuxErrorLabel.js?","webpack:///./src/views/modals/NewAccountModal.js?","webpack:///./src/views/modals/RemoveAccountModal.js?","webpack:///./src/components/partials/IndexPanel.js?","webpack:///./src/components/Money.js?","webpack:///./src/views/Account.js?","webpack:///./src/components/TransfersTable.js?","webpack:///./src/components/AccountInfo.js?","webpack:///./src/utils/blockedExecution.js?","webpack:///./src/views/SignIn.js?","webpack:///./src/controls/bootstrap/EmailSignInForm.js?","webpack:///./src/actions/signIn.js?","webpack:///./src/views/SignUp.js?","webpack:///./src/controls/bootstrap/EmailSignUpForm.js?","webpack:///./src/entities/formToPayloadMappers.js?","webpack:///./src/actions/signUp.js?"],"names":["reactRoot","window","document","getElementById","then","provider","render","process","env","NODE_ENV","firstChild","attributes","console","error","initialize","App","props","children","Component","cookies","isServer","currentLocation","userAgent","reducer","app","router","routes","reduxReactRouter","createHistoryMethod","store","createHistory","dispatch","default","emailSignInPath","customersPath","currentUserPath","accountsPath","transfersPath","storage","tokenFormat","handleLoginResponse","resp","data","handleAccountUpdateResponse","handleTokenValidationResponse","redirectPath","blank","global","navigator","log","mainReducer","auth","ui","authStateReducer","configure","signIn","signUp","signOut","authentication","user","configReducer","AUTH","CONFIGURE_START","CONFIGURE_COMPLETE","CONFIGURE_ERROR","c","AUTHENTICATE_START","AUTHENTICATE_COMPLETE","AUTHENTICATE_ERROR","SIGN_IN_START","SIGN_IN_COMPLETE","SIGN_IN_ERROR","SIGN_IN_FORM_UPDATE","SIGN_UP_START","SIGN_UP_COMPLETE","SIGN_UP_ERROR","SIGN_UP_FORM_UPDATE","SIGN_OUT_START","SIGN_OUT_COMPLETE","ENTITIES","REQUESTED","RECEIVED","RECEIVED_LIST","ACCOUNTS","LIST_START","LIST_COMPLETE","LIST_ERROR","LIST_REF_START","LIST_REF_COMPLETE","LIST_REF_ERROR","CREATE_START","CREATE_COMPLETE","CREATE_ERROR","CREATE_FORM_UPDATE","EDIT_START","EDIT_COMPLETE","EDIT_ERROR","EDIT_FORM_UPDATE","CREATE_REF_START","CREATE_REF_COMPLETE","CREATE_REF_ERROR","CREATE_REF_FORM_UPDATE","CREATE_REF_OWNER_LOOKUP_START","CREATE_REF_OWNER_LOOKUP_COMPLETE","CREATE_REF_ACCOUNT_LOOKUP_START","CREATE_REF_ACCOUNT_LOOKUP_COMPLETE","ACCOUNT","SINGLE_START","SINGLE_COMPLETE","SINGLE_ERROR","DELETE_START","DELETE_COMPLETE","DELETE_ERROR","TRANSFERS","MAKE_START","MAKE_COMPLETE","MAKE_ERROR","MAKE_FORM_UPDATE","ERROR","START","STOP","defineActionTypes","TODO_DEFINE","Symbol","defineActionType","obj","result","Object","keys","reduce","memo","namespace","value","types","namespaceTypes","trim","split","filter","key","test","Set","size","length","forEach","t","entries","type","createByIdDataReducer","next","KEY_REQUEST","KEY_SUCCESS","KEY_ERROR","state","action","id","errors","createDataReducer","payloadActionNameProp","payloadStateNameProp","payloadAssignFn","k","initialState","loading","formReducer","payload","isSealed","aggregate","valid","authReducer","signInReducer","createFormReducer","KEY_UPDATE","form","signUpReducer","signOutInitialState","signOutReducer","initalState","isSignedIn","userReducer","dataReducer","transfers","entities","accounts","bookmarkAccount","ownAccountsReducer","otherAccountsReducer","toAccounts","map","createAccountReducer","editAccountReducer","own","other","create","edit","selectedEvents","nodeInitialState","entity","hashMap","item","accountId","optionsLoaderInitialState","options","accountsDisabled","ownersLookup","accountsLookup","optionsLoaderReducer","isOwnerSetBlank","isOwnerSelected","nextAccountsDisabled","nextForm","account","nextErrors","uiReducer","transfersMake","setEndpointKeys","storeCurrentEndpointKey","C","SET_ENDPOINT_KEYS","STORE_CURRENT_ENDPOINT_KEY","endpoints","currentEndpointKey","defaultEndpointKey","endpoint","settings","INITIAL_CONFIG_KEY","DEFAULT_CONFIG_KEY","SAVED_CONFIG_KEY","SAVED_CREDS_KEY","SAVED_USER_INFO","authenticate","U","authenticateStart","authenticateComplete","authenticateError","forceReread","savedUserPromise","Promise","rs","rj","currentHeaders","retrieveHeaders","accessToken","reason","savedUser","retrieveUserData","userData","persistUserData","err","catch","resolve","makeActionCreator","argNames","args","arg","index","setCurrentSettings","getCurrentSettings","setCurrentEndpoint","getCurrentEndpoint","setCurrentEndpointKey","getCurrentEndpointKey","setDefaultEndpointKey","getDefaultEndpointKey","resetConfig","destroySession","getInitialEndpointKey","isApiRequest","getSessionEndpointKey","getSessionEndpoint","getEmailSignInUrl","getEmailSignUpUrl","getCurrentUserUrl","getAccountsUrl","getCustomersUrl","getTransfersUrl","getApiUrl","getTokenFormat","persistData","retrieveData","authState","currentSettings","currentEndpoint","memoryStorage","clean","s","e","localStorage","removeItem","remove","path","cookiePath","unescapeQuotes","val","replace","get","getItem","url","configKey","rauthState","apiUrl","JSON","stringify","setItem","set","expires","cookieExpiry","parse","Function","eval","apiSignIn","apiSignUp","apiGetCurrentUser","apiCreateAccount","apiCreateRefAccount","apiMakeTransfer","apiRetrieveAccounts","apiRetrieveTransfers","apiRetrieveAccount","apiDeleteAccount","apiRetrieveUsers","apiRetrieveUser","makeQuery","params","encodeURIComponent","join","body","headers","method","customerId","title","initialBalance","balance","description","owner","fromAccountId","amount","reject","message","email","getAuthHeaders","updateAuthCredentials","nextHeaders","newHeaders","blankHeaders","parseResponse","response","json","status","rest","jvmPattern","m","name","accountsList","accountCreate","accountRefCreate","fetchOwnAccounts","fetchAccount","deleteAccount","errorMessageTimedOut","api","entityRequested","entityReceived","accountsListRequested","accountsListReceived","accountsListError","accountsRefListReceived","accountCreateStart","accountCreateComplete","accountCreateError","accountCreateFormUpdate","accountRefCreateStart","accountRefCreateComplete","accountRefCreateError","accountRefCreateFormUpdate","accountRequested","accountComplete","accountError","userId","list","readUntilChanged","initialData","initialDataFlat","setTimeout","call","deleteAccountRequested","deleteAccountComplete","deleteAccountError","errorMessageStart","errorMessageStop","timeout","createRefOwnerLookupStart","createRefOwnerLookupComplete","createRefAccountLookupStart","createRefAccountLookupComplete","createRefOwnerLookup","lookup","customers","arr","fullName","firstName","lastName","i","label","createRefAccountLookup","makeTransferRequested","makeTransferComplete","makeTransferError","makeTransferFormUpdate","makeTransfer","moneyTransferId","getTransfersRequested","getTransfersComplete","getTransfersError","getTransfers","transactionsHistory","applyConfig","defaultSettings","forceHardRedirect","initialCredentials","passwordResetSuccessUrl","location","href","confirmationSuccessUrl","parseExpiry","parseInt","reset","match","parseEndpointConfig","defaultEndpoint","signOutPath","emailRegistrationPath","accountUpdatePath","accountDeletePath","passwordResetPath","passwordUpdatePath","tokenValidationPath","authProviderPaths","github","facebook","google","getFirstObjectKey","constructor","Array","defaultConfig","configName","normalizeTokenKeys","getAllParams","getRedirectInfo","token","auth_token","client_id","client","config","endpointKey","getAnchorSearch","rawAnchor","hash","getSearchQs","rawQs","search","qs","qsObj","getAnchorQs","anchorQs","anchorQsObj","stripKeys","q","buildCredentials","authHeaders","getLocationWithoutParams","newSearch","newAnchorQs","newAnchor","newLocation","pathname","authKeys","authRedirectHeaders","authRedirectPath","requireAuthentication","AuthComponent","isAuthenticated","redirectAfterLogin","checkRedirect","nextProps","mapStateToProps","read","src","defaultVal","pathItem","Container","propTypes","node","BS","HeaderLinks","evt","buttonSet","isRegister","isLogin","condition","bind","signOutStart","signOutComplete","Modals","A","resetModals","showAccountModal","show3rdPartyAccountModal","showDeleteAccountModal","MyAccounts","setState","close","accountToRemove","ssn","phoneNumber","address","city","street1","street2","zipCode","errorLine","ownAccountsData","ownAccounts","idx","remove3rdPartyAccountModal","refAccountsData","refAccounts","concat","createAccountModal","create3rdPartyAccountModal","createAccountModalConfirmed","create3rdPartyAccountModalConfirmed","remove3rdPartyAccountModalConfirmed","formValidation","prop","push","hasErrors","Add3rdPartyAccountModal","preventDefault","validationErrors","onHide","input","disabled","ownersLoading","formErrors","show","display","getOwnersOptions","handleInput","handleSubmit","ButtonLoader","icon","spinColor","bsStyle","spinColorDark","spinColorLight","spinConfig","position","marginRight","width","height","top","onClick","className","style","bsSize","renderIcon","bool","object","string","func","isRequired","defaultProps","lines","radius","AuthInput","ev","onChange","target","paddingLeft","marginBottom","left","renderErrorList","array","AuxErrorLabel","NewAccountModal","event","actionLabel","RemoveAccountBookmarkModal","titleRaw","descriptionRaw","balanceRaw","entityId","Number","toFixed","handleAction","IndexPanel","header","moneyText","isNaN","absNum","Math","abs","Money","unsaved","Account","ensureTransfers","ensureAccounts","cb","forceFetch","all","transfer","spinnerResult","transferTo","itemAccountId","substr","transferDisabled","initiateTransfer","TransfersTable","currentAccountId","sort","a","b","date","entryType","toAccountId","v","items","isOriginating","forAccount","transfersMarkup","preprocessItems","transactionId","transferTimestamp","Date","timeAgoTitle","toLocaleDateString","toLocaleTimeString","directionMarkup","counterAccountMarkup","AccountInfo","ensureData","blocked","fn","useCb","isBlocked","SignIn","query","signInProps","inputProps","password","EmailSignInForm","formData","submit","ex","shape","emailSignIn","emailSignInFormUpdate","emailSignInStart","emailSignInComplete","emailSignInError","SignUp","EmailSignUpForm","getIn","customerInfoMap","address1","address2","fname","lname","zip","emailSignUpFormUpdate","emailSignUpStart","emailSignUpComplete","emailSignUpError","emailSignUp"],"mappings":";;;;;;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;;AAGA,KAAMA,YAAYC,OAAOC,QAAP,CAAgBC,cAAhB,CAA+B,MAA/B,CAAlB,C,CATA;;;;AAUA,wBAAaC,IAAb,CAAkB,gBAAkB;AAAA,OAAfC,QAAe,QAAfA,QAAe;;AAClC,sBAASC,MAAT,CAAgBD,QAAhB,EAA0BL,SAA1B;AACD,EAFD;;AAKA;;;AAGA,KAAIO,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,OAAI,CAACT,UAAUU,UAAX,IAAyB,CAACV,UAAUU,UAAV,CAAqBC,UAA/C,IACF,CAACX,UAAUU,UAAV,CAAqBC,UAArB,CAAgC,qBAAhC,CADH,EAC2D;AACzDC,aAAQC,KAAR,CAAc,mHAAd;AACD;AACF,E;;;;;;;;;;;;;;;;;;;;SCUeC,U,GAAAA,U;;AA7BhB;;;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;AAEA;;AAEA;;;;AAEA;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;gfAvBA;;;;KAyBMC,G;;;;;;;;;;;8BACK;AACP,cAAQ;AAAA;AAAA;AACH,cAAKC,KAAL,CAAWC;AADR,QAAR;AAGD;;;;GALe,gBAAMC,S;;AAQjB,UAASJ,UAAT,GAA0E;AAAA,oEAAJ,EAAI;;AAAA,OAArDK,OAAqD,QAArDA,OAAqD;AAAA,OAA5CC,QAA4C,QAA5CA,QAA4C;AAAA,OAAlCC,eAAkC,QAAlCA,eAAkC;AAAA,OAAjBC,SAAiB,QAAjBA,SAAiB;;;AAE/E,OAAMC,UAAU,4BAAgB;AAC9BC,4BAD8B;AAE9BC;AAF8B,IAAhB,CAAhB;;AAKA,OAAMC,SACJ;AAAA;AAAA,OAAO,MAAK,GAAZ,EAAgB,WAAWX,GAA3B;AACE,8DAAY,WAAW,+DAAvB,GADF;AAEE,yDAAO,MAAK,QAAZ,EAAqB,2BAArB,GAFF;AAGE,yDAAO,MAAK,UAAZ,EAAuB,2BAAvB,GAHF;AAIE,yDAAO,MAAK,oBAAZ,EAAiC,WAAW,4DAA5C;AAJF,IADF;;AASA;AACA,OAAMY,mBAAsBP,mEAA5B;AACA,OAAMQ,sBAAsBR,oEAA5B;;AAEA;AACA,OAAMS,QAAQ,oBACZ,kDAAuB,4BAAvB,CADY,EAEZF,iBAAiB;AACfD,mBADe;AAEfI,oBAAeF;AAFA,IAAjB,CAFY,sBAMCL,OAND,CAAd;;AASA;;;AAGA,UAAOM,MAAME,QAAN,CAAe,0BAAgB,CACpC;AACEC,cAAS;AACP;AACAC,wBAAiB,YAFV;AAGPC,sBAAe,gBAHR;AAIPC,wBAAiB,WAJV;AAKPC,qBAAc,eALP;AAMPC,sBAAe;AANR;AADX,IADoC,CAAhB,EAWnB;AACDlB,qBADC;AAEDC,uBAFC;AAGDC,qCAHC;AAIDiB,cAAS,cAJR;AAKDC,kBAAa;AACX,uBAAgB;AADL,MALZ;AAQDC,0BAAqB,6BAASC,IAAT,EAAe;AAClC;;AAEA,cAAOA,KAAKC,IAAZ;AACD,MAZA;;AAcDC,kCAA6B,qCAASF,IAAT,EAAe;AAC1C;;AAEA,cAAOA,KAAKC,IAAZ;AACD,MAlBA;;AAoBDE,oCAA+B,uCAASH,IAAT,EAAe;AAC5C;AACA,cAAOA,KAAKC,IAAZ;AACD;AAvBA,IAXmB,CAAf,EAmCHtC,IAnCG,CAmCE,YAAkC;AAAA,uEAAP,EAAO;;AAAA,SAA/ByC,YAA+B,SAA/BA,YAA+B;AAAA,SAAjBC,KAAiB,SAAjBA,KAAiB;;AACzC;AACA;AACA,SAAIxB,SAAJ,EAAe;AACbyB,cAAOC,SAAP,GAAmB,EAAC1B,oBAAD,EAAnB;AACD;;AAED,SAAIwB,KAAJ,EAAW;AACT;AACA;AACA,cAAO,+CAAP;AACD;;AAEDlC,aAAQqC,GAAR,qBAA8BJ,YAA9B;;AAEA,YAAQ;AACNC,mBADM;AAENjB,mBAFM;AAGNgB,iCAHM;AAINxC,iBACE;AAAA;AAAA,WAAU,OAAOwB,KAAjB,EAAwB,KAAI,UAA5B;AACE,mEAAa,UAAUH,MAAvB;AADF;AALI,MAAR;AAUD,IA5DM,CAAP;AA6DD,E;;;;;;;;;;AC/HD;AACA;;AAEA;;AAEA;;AAEA;AACA,kC;;;;;;;ACRA;;AAEA;AACA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,4HAA2H;AAC3H;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6C;;;;;;;ACpEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA,qC;;;;;;;;;;;;;;;AC/BA;;AAEA;;;;AACA;;;;AACA;;;;;;AAPA;;;AASA,KAAMwB,cAAc,4BAAgB;AAClCC,uBADkC;AAElCT,uBAFkC;AAGlCU;AAHkC,EAAhB,CAApB;;mBAMeF,W;;;;;;;;;;;;;;;;;ACZf;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,KAAMG,mBAAmB,4BAAgB;AACvCC,sCADuC;AAEvCC,gCAFuC;AAGvCC,gCAHuC;AAIvCC,mCAJuC;AAKvCC,4CALuC;AAMvCC;AANuC,EAAhB,CAAzB,C,CAZA;;;mBAqBeN,gB;;;;;;;;;;;;;;;;;;mQCrBf;;;;;AAGA;;;;AACA;;;;;;AAEO,KAAMO,wCAAgB,iCAAkB,CAC3C,uBAAEC,IAAF,CAAOC,eADoC,EAE3C,uBAAED,IAAF,CAAOE,kBAFoC,EAG3C,uBAAEF,IAAF,CAAOG,eAHoC,CAAlB,EAK3B,QAL2B,EAM3B,QAN2B,EAO3B;AAAA,OAACC,CAAD,yDAAK,EAAL;AAAA,uBAAkBA,CAAlB;AAAA,EAP2B,CAAtB;AASP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"app.d91662ee734b40065ff3.js","sourcesContent":["/**\n * Created by andrew on 12/02/16.\n */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { initialize } from \"./app\";\n/**\n * Fire-up React Router.\n */\nconst reactRoot = window.document.getElementById(\"root\");\ninitialize().then(({ provider }) => {\n  ReactDOM.render(provider, reactRoot);\n});\n\n\n/**\n * Detect whether the server-side render has been discarded due to an invalid checksum.\n */\nif (process.env.NODE_ENV !== \"production\") {\n  if (!reactRoot.firstChild || !reactRoot.firstChild.attributes ||\n    !reactRoot.firstChild.attributes[\"data-react-checksum\"]) {\n    console.error(\"Server-side React render was discarded. Make sure that your initial render does not contain any client-side code.\");\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/client.js\n **/","/**\n * Created by andrew on 12/02/16.\n */\n\nimport React from \"react\";\nimport { createStore, compose, applyMiddleware, combineReducers} from \"redux\";\nimport { Provider, connect} from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport createLogger from 'redux-logger';\nimport { Route, IndexRoute, Link, IndexLink } from \"react-router\";\nimport { ReduxRouter} from \"redux-router\";\nimport { createHistory, createHashHistory, createMemoryHistory } from \"history\";\nimport { pushState, routerStateReducer, reduxReactRouter as clientRouter} from \"redux-router\";\nimport { reduxReactRouter as serverRouter } from \"redux-router/server\";\n\nimport mainReducer from './reducers';\n\nimport { configure as endpointsConfig } from './actions/configure';\nimport { requireAuthentication } from './components/AuthComponent';\nimport Container from \"./components/partials/Container\";\nimport MyAccounts from \"./views/MyAccounts\";\nimport Account from \"./views/Account\";\nimport SignIn from \"./views/SignIn\";\nimport SignUp from \"./views/SignUp\";\n\nclass App extends React.Component {\n  render() {\n    return (<Container>\n        {this.props.children}\n      </Container>);\n  }\n}\n\nexport function initialize({cookies, isServer, currentLocation, userAgent} = {}) {\n\n  const reducer = combineReducers({\n    app: mainReducer,\n    router: routerStateReducer\n  });\n\n  const routes = (\n    <Route path=\"/\" component={App}>\n      <IndexRoute component={requireAuthentication(MyAccounts)} />\n      <Route path=\"signin\" component={SignIn} />\n      <Route path=\"register\" component={SignUp} />\n      <Route path=\"account/:accountId\" component={requireAuthentication(Account)} />\n    </Route>\n  );\n\n  // these methods will differ from server to client\n  const reduxReactRouter    = isServer ? serverRouter : clientRouter;\n  const createHistoryMethod = isServer ? createMemoryHistory : createHashHistory;\n\n  // create the redux store\n  const store = compose(\n    applyMiddleware(thunk, createLogger()),\n    reduxReactRouter({\n      routes,\n      createHistory: createHistoryMethod\n    })\n  )(createStore)(reducer);\n\n\n  /**\n   * The React Router 1.0 routes for both the server and the client.\n   */\n  return store.dispatch(endpointsConfig([\n    {\n      default: {\n        //apiUrl: '/',\n        emailSignInPath: '/api/login',\n        customersPath: '/api/customers',\n        currentUserPath: '/api/user',\n        accountsPath: '/api/accounts',\n        transfersPath: '/api/transfers'\n      }\n    }\n  ], {\n    cookies,\n    isServer,\n    currentLocation,\n    storage: 'localStorage',\n    tokenFormat: {\n      \"access-token\": \"{{ access-token }}\"\n    },\n    handleLoginResponse: function(resp) {\n      debugger;\n\n      return resp.data;\n    },\n\n    handleAccountUpdateResponse: function(resp) {\n      debugger;\n\n      return resp.data;\n    },\n\n    handleTokenValidationResponse: function(resp) {\n      debugger;\n      return resp.data;\n    }\n  })).then(({ redirectPath, blank } = {}) => {\n    // hack for material-ui server-side rendering.\n    // see https://github.com/callemall/material-ui/pull/2007\n    if (userAgent) {\n      global.navigator = {userAgent};\n    }\n\n    if (blank) {\n      // if `blank` is true, this is an OAuth redirect and should not\n      // be rendered\n      return <noscript />;\n    }\n\n    console.log(`redirect path: ${redirectPath}`);\n\n    return ({\n      blank,\n      store,\n      redirectPath,\n      provider: (\n        <Provider store={store} key=\"provider\">\n          <ReduxRouter children={routes} />\n        </Provider>\n      )\n    });\n  });\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/app.js\n **/","// This file is copied to the root of the project to allow\n'use strict';\n\nexports.__esModule = true;\n\nvar _libServer = require('./lib/server');\n\nexports.reduxReactRouter = _libServer.reduxReactRouter;\nexports.match = _libServer.match;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/redux-router/server.js\n ** module id = 289\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\nexports.match = match;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _redux = require('redux');\n\nvar _reduxReactRouter = require('./reduxReactRouter');\n\nvar _reduxReactRouter2 = _interopRequireDefault(_reduxReactRouter);\n\nvar _useDefaults = require('./useDefaults');\n\nvar _useDefaults2 = _interopRequireDefault(_useDefaults);\n\nvar _routeReplacement = require('./routeReplacement');\n\nvar _routeReplacement2 = _interopRequireDefault(_routeReplacement);\n\nvar _matchMiddleware = require('./matchMiddleware');\n\nvar _matchMiddleware2 = _interopRequireDefault(_matchMiddleware);\n\nvar _constants = require('./constants');\n\nfunction serverInvariants(next) {\n  return function (options) {\n    return function (createStore) {\n      if (!options || !(options.routes || options.getRoutes)) {\n        throw new Error('When rendering on the server, routes must be passed to the ' + 'reduxReactRouter() store enhancer; routes as a prop or as children of ' + '<ReduxRouter> is not supported. To deal with circular dependencies ' + 'between routes and the store, use the option getRoutes(store).');\n      }\n      if (!options || !options.createHistory) {\n        throw new Error('When rendering on the server, createHistory must be passed to the ' + 'reduxReactRouter() store enhancer');\n      }\n\n      return next(options)(createStore);\n    };\n  };\n}\n\nfunction matching(next) {\n  return function (options) {\n    return function (createStore) {\n      return function (reducer, initialState) {\n        var store = _redux.compose(_redux.applyMiddleware(_matchMiddleware2['default'](function (url, callback) {\n          var location = store.history.createLocation(url);\n\n          store.history.match(location, callback);\n        })), next(options))(createStore)(reducer, initialState);\n        return store;\n      };\n    };\n  };\n}\n\nfunction match(url, callback) {\n  return {\n    type: _constants.MATCH,\n    payload: {\n      url: url,\n      callback: callback\n    }\n  };\n}\n\nvar reduxReactRouter = _redux.compose(serverInvariants, _useDefaults2['default'], _routeReplacement2['default'], matching)(_reduxReactRouter2['default']);\nexports.reduxReactRouter = reduxReactRouter;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/redux-router/lib/server.js\n ** module id = 290\n ** module chunks = 0\n **/","'use strict';\n\nexports.__esModule = true;\nexports['default'] = matchMiddleware;\n\nvar _actionCreators = require('./actionCreators');\n\nvar _constants = require('./constants');\n\nfunction matchMiddleware(match) {\n  return function (_ref) {\n    var dispatch = _ref.dispatch;\n    return function (next) {\n      return function (action) {\n        if (action.type === _constants.MATCH) {\n          (function () {\n            var _action$payload = action.payload;\n            var url = _action$payload.url;\n            var callback = _action$payload.callback;\n\n            match(url, function (error, redirectLocation, routerState) {\n              if (!error && !redirectLocation && routerState) {\n                dispatch(_actionCreators.routerDidChange(routerState));\n              }\n              callback(error, redirectLocation, routerState);\n            });\n          })();\n        }\n        return next(action);\n      };\n    };\n  };\n}\n\nmodule.exports = exports['default'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/redux-router/lib/matchMiddleware.js\n ** module id = 291\n ** module chunks = 0\n **/","/**\n * Created by andrew on 18/03/16.\n */\nimport { combineReducers } from 'redux';\n\nimport authStateReducer from './auth';\nimport appStateReducer from './data'\nimport uiReducer from './ui'\n\nconst mainReducer = combineReducers({\n  auth:   authStateReducer,\n  data:   appStateReducer,\n  ui: uiReducer\n});\n\nexport default mainReducer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/index.js\n **/","/**\n * Created by andrew on 25/02/16.\n */\nimport { combineReducers } from 'redux';\n\nimport { configReducer } from './configure';\nimport { authReducer } from './authenticate';\nimport { signInReducer } from './signin';\nimport { signUpReducer } from './signup';\nimport { signOutReducer } from './signout';\nimport { userReducer } from './user';\n\nconst authStateReducer = combineReducers({\n  configure: configReducer,\n  signIn: signInReducer,\n  signUp: signUpReducer,\n  signOut: signOutReducer,\n  authentication: authReducer,\n  user: userReducer\n});\n\nexport default authStateReducer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/auth/index.js\n **/","/**\n * Created by andrew on 25/02/16.\n */\nimport T from '../../constants/ACTION_TYPES';\nimport createDataReducer from '../createDataReducer';\n\nexport const configReducer = createDataReducer([\n    T.AUTH.CONFIGURE_START,\n    T.AUTH.CONFIGURE_COMPLETE,\n    T.AUTH.CONFIGURE_ERROR\n],\n  'config',\n  'config',\n  (c = {}) => ({ ...c })\n);\n//\n// const configInitialState = {\n//   loading: true,\n//   errors: null,\n//   config: null\n// };\n//\n// export const configReducer = (state = {...configInitialState}, action) => {\n//   switch(action.type) {\n//     case T.AUTH.CONFIGURE_START:\n//     {\n//       return {\n//         ...state,\n//         loading: true\n//       };\n//     }\n//\n//     case T.AUTH.CONFIGURE_COMPLETE: {\n//       const { config } = action;\n//       return {\n//         ...state,\n//         loading: false,\n//         errors: null,\n//         config\n//       };\n//     }\n//\n//     case T.AUTH.CONFIGURE_ERROR:\n//     {\n//       const { errors } = action;\n//       return {\n//         ...state,\n//         loading: false,\n//         errors\n//       };\n//     }\n//\n//     default:\n//       return state;\n//   }\n// };\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/auth/configure.js\n **/","import { TODO_DEFINE, defineActionType } from '../utils/defineActionTypes'\n\nexport default defineActionType({\n  /*\n   * View model\n   */\n  AUTH: {\n    CONFIGURE_START: TODO_DEFINE,\n    CONFIGURE_COMPLETE: TODO_DEFINE,\n    CONFIGURE_ERROR: TODO_DEFINE,\n    AUTHENTICATE_START: TODO_DEFINE,\n    AUTHENTICATE_COMPLETE: TODO_DEFINE,\n    AUTHENTICATE_ERROR: TODO_DEFINE,\n    SIGN_IN_START: TODO_DEFINE,\n    SIGN_IN_COMPLETE: TODO_DEFINE,\n    SIGN_IN_ERROR: TODO_DEFINE,\n    SIGN_IN_FORM_UPDATE: TODO_DEFINE,\n    SIGN_UP_START: TODO_DEFINE,\n    SIGN_UP_COMPLETE: TODO_DEFINE,\n    SIGN_UP_ERROR: TODO_DEFINE,\n    SIGN_UP_FORM_UPDATE: TODO_DEFINE,\n    SIGN_OUT_START: TODO_DEFINE,\n    SIGN_OUT_COMPLETE: TODO_DEFINE\n  },\n\n  ENTITIES: {\n    REQUESTED: TODO_DEFINE,\n    RECEIVED: TODO_DEFINE,\n    RECEIVED_LIST: TODO_DEFINE\n  },\n\n  ACCOUNTS: {\n    LIST_START: TODO_DEFINE,\n    LIST_COMPLETE: TODO_DEFINE,\n    LIST_ERROR: TODO_DEFINE,\n    LIST_REF_START: TODO_DEFINE,\n    LIST_REF_COMPLETE: TODO_DEFINE,\n    LIST_REF_ERROR: TODO_DEFINE,\n    CREATE_START: TODO_DEFINE,\n    CREATE_COMPLETE: TODO_DEFINE,\n    CREATE_ERROR: TODO_DEFINE,\n    CREATE_FORM_UPDATE: TODO_DEFINE,\n    EDIT_START: TODO_DEFINE,\n    EDIT_COMPLETE: TODO_DEFINE,\n    EDIT_ERROR: TODO_DEFINE,\n    EDIT_FORM_UPDATE: TODO_DEFINE,\n    CREATE_REF_START: TODO_DEFINE,\n    CREATE_REF_COMPLETE: TODO_DEFINE,\n    CREATE_REF_ERROR: TODO_DEFINE,\n    CREATE_REF_FORM_UPDATE: TODO_DEFINE,\n    CREATE_REF_OWNER_LOOKUP_START: TODO_DEFINE,\n    CREATE_REF_OWNER_LOOKUP_COMPLETE: TODO_DEFINE,\n    CREATE_REF_ACCOUNT_LOOKUP_START: TODO_DEFINE,\n    CREATE_REF_ACCOUNT_LOOKUP_COMPLETE: TODO_DEFINE\n  },\n\n  ACCOUNT: {\n    SINGLE_START: TODO_DEFINE,\n    SINGLE_COMPLETE: TODO_DEFINE,\n    SINGLE_ERROR: TODO_DEFINE,\n    DELETE_START: TODO_DEFINE,\n    DELETE_COMPLETE: TODO_DEFINE,\n    DELETE_ERROR: TODO_DEFINE\n  },\n  \n  TRANSFERS: {\n    MAKE_START: TODO_DEFINE,\n    MAKE_COMPLETE: TODO_DEFINE,\n    MAKE_ERROR: TODO_DEFINE,\n    MAKE_FORM_UPDATE: TODO_DEFINE,\n    LIST_START: TODO_DEFINE,\n    LIST_COMPLETE: TODO_DEFINE,\n    LIST_ERROR: TODO_DEFINE\n  },\n\n  ERROR: {\n    START:TODO_DEFINE,\n    STOP:TODO_DEFINE\n  }\n\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants/ACTION_TYPES.js\n **/","import invariant from 'invariant'\n\nexport const TODO_DEFINE = Symbol('Define property');\n\nexport const defineActionType = (obj) => {\n  const result = Object.keys(obj).reduce((memo, namespace) => {\n    const value = obj[namespace];\n    let types = [];\n    const namespaceTypes = {};\n\n    if (typeof value == 'string') {\n      types = value.trim().split(/\\s+/);\n    } else {\n      types = Object.keys(value)\n        .filter((key) => value[key] === TODO_DEFINE);\n    }\n\n    invariant(\n      /^[A-Z][A-Z0-9_]*$/.test(namespace),\n      \"Namespace names must start with a capital letter, and be composed entirely of capital letters, numbers, and the underscore character.\"\n    );\n\n    invariant(\n      (new Set(types)).size == types.length,\n      \"There must be no repeated action types passed to defineActionTypes\"\n    );\n\n    types.forEach(t => {\n      invariant(\n        /^[A-Z][A-Z0-9_]*$/.test(t),\n        \"Types must start with a capital letter, and be composed entirely of capital letters, numbers, and the underscore character.\"\n      );\n      namespaceTypes[t] = `@@app/${namespace}/${t}`;\n    });\n\n    memo[namespace] = namespaceTypes;\n\n    return memo;\n  }, {});\n\n  return result;\n\n};\n\nexport default function defineActionTypes(obj) {\n  const result = {}\n\n  for (let [namespace, value] of Object.entries(obj)) {\n    let types = value.trim().split(/\\s+/)\n    const namespaceTypes = {}\n\n    invariant(\n      /^[A-Z][A-Z0-9_]*$/.test(namespace),\n      \"Namespace names must start with a capital letter, and be composed entirely of capital letters, numbers, and the underscore character.\"\n    )\n    invariant(\n      (new Set(types)).size == types.length,\n      \"There must be no repeated action types passed to defineActionTypes\"\n    )\n\n    for (let type of types) {\n      invariant(\n        /^[A-Z][A-Z0-9_]*$/.test(type),\n        \"Types must start with a capital letter, and be composed entirely of capital letters, numbers, and the underscore character.\"\n      )\n\n      namespaceTypes[type] = `@@app/${namespace}/${type}`\n    }\n\n    result[namespace] = namespaceTypes\n  }\n\n  return result\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/defineActionTypes.js\n **/","/**\n * Created by andrew on 3/22/16.\n */\n\nexport const createByIdDataReducer = ([KEY_REQUEST, KEY_SUCCESS, KEY_ERROR], next) => (state = {}, action) => {\n  switch (action.type) {\n    case KEY_REQUEST:\n    case KEY_SUCCESS:\n    case KEY_ERROR: {\n      if (!action.id) {\n        debugger;\n      }\n      if (state.errors) {\n        debugger;\n      }\n      return {\n        ...state,\n        [action.id]: next(state, action)\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nconst createDataReducer = ([KEY_REQUEST, KEY_SUCCESS, KEY_ERROR], payloadActionNameProp = 'payload', payloadStateNameProp = 'data', payloadAssignFn = (k = []) => [...k]) => {\n\n  const initialState = {\n    loading: false,\n    errors: {},\n    [payloadStateNameProp]: payloadAssignFn()\n  };\n\n  return function formReducer(state = {...initialState}, action) {\n    switch(action.type) {\n      case KEY_REQUEST: {\n        return {\n          ...state,\n          loading: true\n        }\n      }\n      case KEY_SUCCESS: {\n        const payload = action[payloadActionNameProp];\n        return {\n          ...initialState,\n          [payloadStateNameProp]: payloadAssignFn(payload)\n        };\n      }\n      case KEY_ERROR:\n      {\n        const {error} = action;\n        return {\n          ...state,\n          loading: false,\n          errors: Object.isSealed(error) ? {aggregate: error} : {...error}\n        }\n      }\n\n      default:\n        return state;\n    }\n  };\n};\n\nexport default createDataReducer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/createDataReducer.js\n **/","/**\n * Created by andrew on 25/02/16.\n */\nimport T from '../../constants/ACTION_TYPES';\n\nconst initialState = {\n  loading: false,\n  valid: false,\n  errors: null\n};\n\nexport const authReducer = (state = {...initialState}, action) => {\n  switch(action.type) {\n    case T.AUTH.AUTHENTICATE_START:\n      return {\n        ...state,\n        loading: true\n      };\n\n    case T.AUTH.AUTHENTICATE_COMPLETE:\n      return {\n        ...state,\n        loading: false,\n        errors: null,\n        valid: true\n      };\n\n    case T.AUTH.AUTHENTICATE_ERROR:\n      return {\n        ...state,\n        loading: false,\n        errors: \"Invalid token\",\n        valid: false\n      };\n\n    default: return state;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/auth/authenticate.js\n **/","/**\n * Created by andrew on 25/02/16.\n */\nimport T from '../../constants/ACTION_TYPES';\nimport createFormReducer from '../createFormReducer';\n\nexport const signInReducer = createFormReducer([\n  T.AUTH.SIGN_IN_START,\n  T.AUTH.SIGN_IN_COMPLETE,\n  T.AUTH.SIGN_IN_ERROR,\n  T.AUTH.SIGN_IN_FORM_UPDATE\n]);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/auth/signin.js\n **/","/**\n * Created by andrew on 3/22/16.\n */\n\nconst createFormReducer = ([KEY_REQUEST, KEY_SUCCESS, KEY_ERROR, KEY_UPDATE]) => {\n\n  const initialState = {\n    loading: false,\n    form: {},\n    errors: {}\n  };\n\n  return function formReducer(state = {...initialState}, action) {\n    switch(action.type) {\n      case KEY_REQUEST: {\n        return {\n          ...state,\n          loading: true\n        }\n      }\n      case KEY_ERROR: {\n        const { error } = action;\n        return {\n          ...state,\n          loading: false,\n          errors: error\n        }\n      }\n      case KEY_SUCCESS: {\n        return {\n          ...initialState\n        }\n      }\n      case KEY_UPDATE: {\n        const { key, value } = action;\n        return {\n          ...state,\n          form: {\n            ...state.form,\n            [key]: value\n          },\n          errors: {\n            ...state.errors,\n            aggregate: null,\n            [key]: null\n          }\n        }\n      }\n\n      default:\n        return state;\n    }\n  };\n};\n\nexport default createFormReducer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/createFormReducer.js\n **/","/**\n * Created by andrew on 25/02/16.\n */\nimport T from '../../constants/ACTION_TYPES';\nimport createFormReducer from '../createFormReducer';\n\nexport const signUpReducer = createFormReducer([\n  T.AUTH.SIGN_UP_START,\n  T.AUTH.SIGN_UP_COMPLETE,\n  T.AUTH.SIGN_UP_ERROR,\n  T.AUTH.SIGN_UP_FORM_UPDATE\n]);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/auth/signup.js\n **/","/**\n * Created by andrew on 25/02/16.\n */\nimport T from '../../constants/ACTION_TYPES';\n\nconst signOutInitialState = {\n  loading: false,\n  errors: null\n};\n\nexport const signOutReducer = (state = {...signOutInitialState}, action) => {\n  switch(action.type) {\n    case T.AUTH.SIGN_OUT_START:\n      return {\n        ...state,\n        loading: true\n      };\n    case T.AUTH.SIGN_OUT_COMPLETE:\n      return {\n        ...state,\n        loading: false,\n        errors: null\n      };\n    default: return state;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/auth/signout.js\n **/","/**\n * Created by andrew on 25/02/16.\n */\nimport T from '../../constants/ACTION_TYPES';\n\nconst initalState = {\n  attributes: null,\n  isSignedIn: false\n};\n\nexport const userReducer = (state = {...initalState}, action) => {\n  switch(action.type) {\n    case T.AUTH.AUTHENTICATE_COMPLETE:\n    case T.AUTH.SIGN_IN_COMPLETE: {\n      const { user } = action;\n      return {...state,\n        attributes: user,\n        isSignedIn: !!user\n      };\n    }\n    case T.AUTH.SIGN_OUT_COMPLETE:\n    case T.AUTH.AUTHENTICATE_ERROR:\n      return {\n        ...initalState\n      };\n    default: return state;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/auth/user.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\nimport { combineReducers } from 'redux';\n\nimport { accounts } from './accounts';\nimport { transfers } from './transfers';\nimport { entities } from './entities';\nimport { bookmarkAccount } from './bookmarkAccount';\n\nconst dataReducer = combineReducers({\n  transfers,\n  entities,\n  accounts,\n  bookmarkAccount\n});\n\nexport default dataReducer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/data/index.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\n/**\n * Created by andrew on 15/03/16.\n */\nimport T from '../../constants/ACTION_TYPES';\nimport { combineReducers } from 'redux';\nimport createFormReducer from '../createFormReducer';\n\nconst ownAccountsReducer = (state = [], action ) => {\n  switch (action.type) {\n    case T.ACCOUNTS.LIST_COMPLETE: {\n      const { payload = [] } = action;\n      //const accounts = Object.keys(payload).map(key => payload[key]);\n      return [\n        ...payload\n      ];\n    }\n    default: return state;\n  }\n};\n\nconst otherAccountsReducer = (state = [], action ) => {\n  switch (action.type) {\n    case T.AUTH.AUTHENTICATE_COMPLETE:\n    case T.AUTH.SIGN_IN_COMPLETE: {\n      const { user } = action;\n      const { toAccounts = [] } = user;\n      return otherAccountsReducer(state, {\n        type: T.ACCOUNTS.LIST_REF_COMPLETE,\n        payload: toAccounts\n      });\n    }\n\n    case T.ACCOUNTS.LIST_REF_COMPLETE: {\n      const { payload = {} } = action;\n      const accounts = Object.keys(payload).map(key => payload[key]);\n      return [\n        ...accounts\n      ];\n    }\n\n    default: return state;\n  }\n};\n\n\nconst createAccountReducer = createFormReducer([\n  T.ACCOUNTS.CREATE_START,\n  T.ACCOUNTS.CREATE_COMPLETE,\n  T.ACCOUNTS.CREATE_ERROR,\n  T.ACCOUNTS.CREATE_FORM_UPDATE\n]);\n\nconst editAccountReducer = createFormReducer([\n  T.ACCOUNTS.EDIT_START,\n  T.ACCOUNTS.EDIT_COMPLETE,\n  T.ACCOUNTS.EDIT_ERROR,\n  T.ACCOUNTS.EDIT_FORM_UPDATE\n]);\n\nexport const accounts = combineReducers({\n  own: ownAccountsReducer,\n  other: otherAccountsReducer,\n  create: createAccountReducer,\n  edit: editAccountReducer\n});\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/data/accounts.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\n/**\n * Created by andrew on 15/03/16.\n */\nimport T from '../../constants/ACTION_TYPES';\nimport  createListReducer from '../createDataReducer';\nimport {createByIdDataReducer } from '../createDataReducer';\n\nconst selectedEvents = [\n  T.TRANSFERS.LIST_START,\n  T.TRANSFERS.LIST_COMPLETE,\n  T.TRANSFERS.LIST_ERROR\n];\n\nexport const transfers = createByIdDataReducer(selectedEvents, createListReducer(selectedEvents));\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/data/transfers.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\nimport T from '../../constants/ACTION_TYPES';\n\nconst initialState = {\n};\n\nconst nodeInitialState = {\n  loading: false,\n  data: {}\n};\n\nexport const entities = (state = {...initialState}, action) => {\n  if (typeof action.length !== 'undefined') {\n    debugger;\n  }\n  switch(action.type) {\n    case T.ENTITIES.REQUESTED: {\n      const { id } = action;\n      return {\n        ...state,\n        [id]: null\n      }\n    }\n    case T.ENTITIES.RECEIVED: {\n      const { id, entity = {} } = action;\n      return {\n        ...state,\n        [id]: {\n          ...entity\n        }\n      }\n    }\n\n    case T.AUTH.AUTHENTICATE_COMPLETE:\n    case T.AUTH.SIGN_IN_COMPLETE:\n    {\n      const { user } = action;\n      const { toAccounts = [] } = user;\n      return {\n        ...state,\n        ...toAccounts\n      };\n\n    }\n    case T.ACCOUNTS.LIST_COMPLETE: {\n      const { payload } = action;\n      const hashMap = payload.reduce((memo, item) => {\n        memo[item.accountId] = item;\n        return memo;\n      }, {});\n      return {\n        ...state,\n        ...hashMap\n      };\n    }\n\n    case T.ACCOUNT.SINGLE_COMPLETE: {\n      const { payload = {} } = action;\n      const { accountId } = payload;\n      if (!accountId) {\n        return state;\n      }\n      return {\n        ...state,\n        [accountId]: payload\n      };\n    }\n    case T.ENTITIES.RECEIVED_LIST:\n    default:\n      return state;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/data/entities.js\n **/","/**\n * Created by andrew on 18/03/16.\n */\nimport T from '../../constants/ACTION_TYPES';\n\nconst optionsLoaderInitialState = {\n  loading: false,\n  options: [],\n  value: ''\n};\n\nconst initialState = {\n  loading: false,\n  form: {},\n  errors: {},\n  accountsDisabled: true,\n\n  ownersLookup: {\n    ...optionsLoaderInitialState\n  },\n  accountsLookup: {\n    ...optionsLoaderInitialState\n  }\n};\n\nconst optionsLoaderReducer = (state = {...optionsLoaderInitialState}, action) => {\n  switch (action.type) {\n    case T.ACCOUNTS.CREATE_REF_OWNER_LOOKUP_START:\n    case T.ACCOUNTS.CREATE_REF_ACCOUNT_LOOKUP_START: {\n      const value = action.payload;\n      return {\n        ...state,\n        loading: true,\n        value\n      };\n    }\n\n    case T.ACCOUNTS.CREATE_REF_OWNER_LOOKUP_COMPLETE:\n    case T.ACCOUNTS.CREATE_REF_ACCOUNT_LOOKUP_COMPLETE: {\n      const { payload } = action;\n      return {\n        ...state,\n        loading: false,\n        options: payload === null ? state.options : payload\n      };\n    }\n\n    default:\n      return state;\n  }\n};\n\nexport const bookmarkAccount = (state = {...initialState}, action) => {\n  switch (action.type) {\n    case T.ACCOUNTS.CREATE_REF_START: {\n      return {\n        ...state,\n        loading: true\n      };\n    }\n    case T.ACCOUNTS.CREATE_REF_COMPLETE:{\n      return {\n        ...initialState\n      };\n    }\n    case T.ACCOUNTS.CREATE_REF_ERROR: {\n      const { error } = action;\n      return {\n        ...state,\n        loading: false,\n        errors: error\n      };\n    }\n    case T.ACCOUNTS.CREATE_REF_FORM_UPDATE:{\n      const { key, value } = action;\n      const isOwnerSetBlank = ((key == 'owner') && !value);\n      const isOwnerSelected = ((key == 'owner') && value);\n      const nextAccountsDisabled = isOwnerSelected ? false : state.accountsDisabled;\n\n      const nextForm = isOwnerSetBlank ? {\n        ...state.form,\n        account: null,\n        [key]: value\n      } : {\n        ...state.form,\n        [key]: value\n      };\n\n      const nextErrors = {\n        ...state.errors,\n        [key]: null\n      };\n      return {\n        ...state,\n        accountsDisabled: nextAccountsDisabled,\n        form: nextForm,\n        errors: nextErrors\n      };\n    }\n    case T.ACCOUNTS.CREATE_REF_OWNER_LOOKUP_START:\n    case T.ACCOUNTS.CREATE_REF_OWNER_LOOKUP_COMPLETE: {\n      return {\n        ...state,\n        ownersLookup:\n          optionsLoaderReducer(state.ownersLookup, action)\n      };\n    }\n    case T.ACCOUNTS.CREATE_REF_ACCOUNT_LOOKUP_START:\n    case T.ACCOUNTS.CREATE_REF_ACCOUNT_LOOKUP_COMPLETE: {\n      return {\n        ...state,\n        accountsLookup:\n          optionsLoaderReducer(state.accountsLookup, action)\n      };\n    }\n    default:\n      return state;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/data/bookmarkAccount.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\n/**\n * Created by andrew on 25/02/16.\n */\nimport { combineReducers } from 'redux';\n\nimport { account } from './account';\nimport { error } from './errors';\nimport { bookmarkAccount } from './bookmarkAccount';\nimport { transfersMake } from './transfersMake';\n\n\nconst uiReducer = combineReducers({\n  account,\n  error,\n  bookmarkAccount,\n  transfersMake\n});\n\nexport default uiReducer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/ui/index.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\n/**\n * Created by andrew on 15/03/16.\n */\nimport T from '../../constants/ACTION_TYPES';\nimport { combineReducers } from 'redux';\n\n\nconst initialState = {\n  loading: false,\n  errors: []\n};\n\nexport const account = (state = { ...initialState }, action ) => {\n  switch(action.type) {\n    case T.ACCOUNT.SINGLE_START: {\n      return {\n        ...state,\n        loading: true\n      };\n    }\n    case T.ACCOUNT.SINGLE_COMPLETE: {\n      return {\n        ...initialState\n      };\n    }\n    case T.ACCOUNT.SINGLE_ERROR: {\n      const { error } = action;\n      return {\n        ...state,\n        loading: false,\n        errors: [ error ]\n      };\n\n    }\n\n    default:\n      return state;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/ui/account.js\n **/","/**\n * Created by andrew on 18/03/16.\n */\n\nimport T from '../../constants/ACTION_TYPES';\n\nexport const error = (state = null, action ) => {\n  switch (action.type) {\n    case T.ERROR.STOP: {\n      return null;\n    }\n    case T.ERROR.START:\n      return action.payload;\n    \n    default:\n      return state;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/ui/errors.js\n **/","/**\n * Created by andrew on 18/03/16.\n */\nexport const bookmarkAccount = (state = {}, action) => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/ui/bookmarkAccount.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\n/**\n * Created by andrew on 15/03/16.\n */\nimport T from '../../constants/ACTION_TYPES';\nimport createFormReducer from '../createFormReducer';\n\nexport const transfersMake = createFormReducer([\n  T.TRANSFERS.MAKE_START,\n  T.TRANSFERS.MAKE_COMPLETE,\n  T.TRANSFERS.MAKE_ERROR,\n  T.TRANSFERS.MAKE_FORM_UPDATE\n]);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/ui/transfersMake.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nimport * as C from \"../utils/constants\";\nimport {\n  authenticate,\n  authenticateStart,\n  authenticateComplete,\n  authenticateError\n} from \"./authenticate\";\n\nimport {\n  retrieveData,\n} from \"../utils/sessionStorage\";\n\n\nimport {applyConfig} from \"../utils/clientSettings\";\n\n//import {\n//  showFirstTimeLoginSuccessModal,\n//  showFirstTimeLoginErrorModal,\n//  showPasswordResetSuccessModal,\n//  showPasswordResetErrorModal\n//} from \"./ui\";\n\nimport getRedirectInfo from \"../utils/parseUrl\";\nimport { pushState } from \"redux-router\";\nimport root from '../utils/root';\n\nexport const SET_ENDPOINT_KEYS = \"SET_ENDPOINT_KEYS\";\nexport const STORE_CURRENT_ENDPOINT_KEY = \"STORE_CURRENT_ENDPOINT_KEY\";\n\nexport function setEndpointKeys(endpoints, currentEndpointKey, defaultEndpointKey) {\n  return { type: SET_ENDPOINT_KEYS, endpoints, currentEndpointKey, defaultEndpointKey };\n}\n\nexport function storeCurrentEndpointKey(currentEndpointKey) {\n  return { type: STORE_CURRENT_ENDPOINT_KEY, currentEndpointKey };\n}\n\nexport function configure(endpoint={}, settings={}) {\n\n  return dispatch => {\n\n\n    return applyConfig({ dispatch, endpoint, settings })\n      .then(() => {\n        return dispatch(authenticate());\n      });\n\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/configure.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nexport const INITIAL_CONFIG_KEY = \"default\";\nexport const DEFAULT_CONFIG_KEY = \"defaultConfigKey\";\nexport const SAVED_CONFIG_KEY   = \"currentConfigName\";\nexport const SAVED_CREDS_KEY    = \"authHeaders\";\nexport const SAVED_USER_INFO    = \"user-info\";\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/constants.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nimport T from '../constants/ACTION_TYPES';\nimport { makeActionCreator } from '../utils/actions';\nimport * as U from '../utils/sessionStorage';\n\nimport { apiGetCurrentUser } from '../utils/api';\nimport { entityReceived } from './entities';\n\nexport const authenticateStart = makeActionCreator(T.AUTH.AUTHENTICATE_START);\nexport const authenticateComplete = makeActionCreator(T.AUTH.AUTHENTICATE_COMPLETE, 'user');\nexport const authenticateError = makeActionCreator(T.AUTH.AUTHENTICATE_ERROR, 'errors');\n\nexport function authenticate(forceReread) {\n  return (dispatch) => {\n\n    dispatch(authenticateStart());\n\n    const savedUserPromise = new Promise((rs, rj) => {\n\n      const currentHeaders = U.retrieveHeaders();\n      const accessToken = currentHeaders[\"access-token\"];\n\n      if (!accessToken) {\n        return rj({ reason: 'no token'});\n      }\n\n      const savedUser = U.retrieveUserData();\n\n      if (savedUser && !forceReread) {\n        return rs(savedUser);\n      }\n\n      return apiGetCurrentUser().then((userData) => {\n        U.persistUserData(userData);\n        dispatch(entityReceived(userData.id, userData));\n        rs(userData);\n      }, (err) => {\n        rj(err);\n      });\n\n    });\n\n\n    return savedUserPromise\n      .then(user => {\n\n        dispatch(authenticateComplete(user));\n\n        return user;\n      })\n      .catch(({reason} = {}) => {\n\n        dispatch(authenticateError([reason]));\n\n        return Promise.resolve({reason});\n      });\n\n\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/authenticate.js\n **/","/**\n * Created by andrew on 15/03/16.\n */\nexport function makeActionCreator(type, ...argNames) {\n  return function(...args) {\n    const action = { type };\n    argNames.forEach((arg, index) => {\n      action[argNames[index]] = args[index]\n    });\n    return action;\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/actions.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nimport Cookies from 'js-cookie';\nimport * as C from \"./constants\";\nimport root from './root';\n\n// stateful variables that persist throughout session\nconst authState = {\n  currentSettings:    {},\n  currentEndpoint:    {},\n  defaultEndpointKey: 'default'\n};\n\nconst memoryStorage = {};\n\nfunction clean(obj) {\n  Object.keys(obj).forEach(k => {\n    delete obj[k];\n  });\n  return obj;\n}\n\nexport function setCurrentSettings (s) {\n  authState.currentSettings = s;\n}\n\nexport function getCurrentSettings () {\n  return authState.currentSettings;\n}\n\nexport function setCurrentEndpoint (e) {\n  authState.currentEndpoint = e;\n}\n\nexport function getCurrentEndpoint () {\n  return authState.currentEndpoint;\n}\n\n/**\n * @deprecated\n * @param k\n */\nexport function setCurrentEndpointKey (k) {\n  persistData(C.SAVED_CONFIG_KEY, k || getDefaultEndpointKey());\n}\n\nexport function getCurrentEndpointKey () {\n  return getDefaultEndpointKey();\n}\n\n/**\n * @deprecated\n * @param k\n */\nexport function setDefaultEndpointKey (k) {\n  persistData(C.DEFAULT_CONFIG_KEY, k);\n}\n\nexport function getDefaultEndpointKey () {\n  return retrieveData(C.DEFAULT_CONFIG_KEY);\n}\n\n// reset stateful variables\nexport function resetConfig () {\n  clean(authState);\n  authState.currentSettings    = {};\n  authState.currentEndpoint    = {};\n  destroySession();\n}\n\n\nexport function destroySession () {\n\n  ([\n    C.SAVED_CREDS_KEY,\n    C.SAVED_CONFIG_KEY,\n    C.SAVED_USER_INFO\n  ]).forEach(key => {\n    // kill all local storage keys\n    if (root.localStorage) {\n      root.localStorage.removeItem(key);\n    }\n\n    // remove from base path in case config is not specified\n    Cookies.remove(key, {\n      path: authState.currentSettings.cookiePath || \"/\"\n    });\n  });\n\n  clean(memoryStorage);\n}\n\nfunction unescapeQuotes (val) {\n  return val && val.replace(/(\"|')/g, \"\");\n}\n\nexport function getInitialEndpointKey () {\n  return unescapeQuotes(\n    Cookies.get(C.SAVED_CONFIG_KEY) ||\n    (root.localStorage && root.localStorage.getItem(C.SAVED_CONFIG_KEY))\n  );\n}\n\nexport function isApiRequest(url) {\n  return true;\n}\n\nexport function getSessionEndpointKey () {\n  return getCurrentEndpointKey();\n}\n\nexport function getSessionEndpoint (k) {\n  return getCurrentEndpoint()[getSessionEndpointKey()];\n}\n\n\n//// only should work for current session\n//export function getSignOutUrl (endpointKey) {\n//  return `${getApiUrl(endpointKey)}${getSessionEndpoint(endpointKey).signOutPath}`\n//}\n\nexport function getEmailSignInUrl () {\n  return `${getSessionEndpoint().emailSignInPath}`\n}\n\nexport function getEmailSignUpUrl () {\n  return getCustomersUrl();\n}\n\nexport function getCurrentUserUrl () {\n  return `${getSessionEndpoint().currentUserPath}`\n}\n\nexport function getAccountsUrl () {\n  return `${getSessionEndpoint().accountsPath}`\n}\n\nexport function getCustomersUrl () {\n  return `${getSessionEndpoint().customersPath}`\n}\n\nexport function getTransfersUrl () {\n  return `${getSessionEndpoint().transfersPath}`\n}\n\n/**\n * @deprecated\n * @param key\n * @returns {string|string}\n */\nexport function getApiUrl(key) {\n  let configKey = getSessionEndpointKey(key);\n  return rauthState.currentEndpoint[configKey].apiUrl;\n}\n\nexport function getTokenFormat() {\n  return authState.currentSettings.tokenFormat;\n}\n\nexport const persistUserData = (user) => {\n  memoryStorage[C.SAVED_USER_INFO] = user;\n};\n\nexport const retrieveUserData = () =>{\n  return memoryStorage[C.SAVED_USER_INFO];\n}\n\nexport function retrieveHeaders() {\n  return retrieveData(C.SAVED_CREDS_KEY) || {};\n}\n\nexport function persistData (key, val) {\n  val = root.JSON.stringify(val);\n\n  switch (authState.currentSettings.storage) {\n    case \"localStorage\":\n      root.localStorage.setItem(key, val);\n      break;\n\n    default:\n      Cookies.set(key, val, {\n        expires: authState.currentSettings.cookieExpiry,\n        path:    authState.currentSettings.cookiePath\n      });\n      break;\n  }\n}\n\nexport function retrieveData (key) {\n  let val = null;\n\n  switch (authState.currentSettings.storage) {\n\n    case \"localStorage\":\n      val = root.localStorage && root.localStorage.getItem(key);\n      break;\n\n    default:\n      val = Cookies.get(key);\n      break;\n  }\n\n  // if value is a simple string, the parser will fail. in that case, simply\n  // unescape the quotes and return the string.\n  try {\n    // return parsed json response\n    return JSON.parse(val);\n  } catch (err) {\n    // unescape quotes\n    return unescapeQuotes(val);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/sessionStorage.js\n **/","/**\n * Created by andrew on 27/02/16.\n */\n// even though this code shouldn't be used server-side, node will throw\n// errors if \"window\" is used\nexport default Function(\"return this\")() || (42, eval)(\"this\");\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/root.js\n **/","/**\n * Created by andrew on 12/03/16.\n */\nimport fetch from './fetch';\nimport {\n  getEmailSignInUrl,\n  getEmailSignUpUrl,\n  getCurrentUserUrl,\n  getAccountsUrl,\n  getCustomersUrl,\n  getTransfersUrl\n} from \"./sessionStorage\";\nimport root from './root';\n\n\nimport { parseResponse } from \"./handleFetchResponse\";\n\nfunction makeQuery(params) {\n  return Object.keys(params).map(key => [encodeURIComponent(key), encodeURIComponent(params[key])].join('=')).join('&');\n}\n\nexport function apiSignIn(body) {\n  return fetch(getEmailSignInUrl(), {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"post\",\n    body: root.JSON.stringify(body)\n  }).then(parseResponse);\n}\n\nexport function apiSignUp(body) {\n  return fetch(getEmailSignUpUrl(), {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"post\",\n    body: root.JSON.stringify(body)\n  }).then(parseResponse);\n}\n\nexport function apiGetCurrentUser() {\n  return fetch(getCurrentUserUrl(), {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"get\"\n  }).then(parseResponse);\n}\n\nexport function apiCreateAccount(customerId, {\n  title, balance: initialBalance, description }) {\n  //{\n  //\"accountId\": \"0000015377cf131b-a250093f26850000\"\n//}\n\n  return fetch(getAccountsUrl(), {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"post\",\n    body: root.JSON.stringify({\n      customerId,\n      title,\n      initialBalance,\n      description })\n  }).then(parseResponse);\n}\n\nexport function apiCreateRefAccount(customerId, {\n  owner, account: accountId, title, description }) {\n\n  return fetch(`${getCustomersUrl()}/${customerId}/toaccounts`, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"post\",\n    body: root.JSON.stringify({\n      owner,\n      id: accountId,\n      title,\n      description })\n  }).then(parseResponse);\n}\n\nexport function apiMakeTransfer(fromAccountId, {\n  account, amount, description }) {\n\n  return fetch(getTransfersUrl(), {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"post\",\n    body: root.JSON.stringify({\n      \"amount\": amount,\n      \"fromAccountId\": fromAccountId,\n      \"toAccountId\": account,\n      description\n    })\n  }).then(parseResponse);\n}\n\nexport function apiRetrieveAccounts(customerId) {\n\n  return fetch(`${getCustomersUrl()}/${customerId}/accounts`, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"get\"\n  }).then(parseResponse);\n}\n\nexport function apiRetrieveTransfers(accountId) {\n\n  return fetch(`${getAccountsUrl()}/${accountId}/history`, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"get\"\n  }).then(parseResponse);\n}\n\nexport function apiRetrieveAccount(accountId) {\n  return fetch(`${getAccountsUrl()}/${accountId}`, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"get\"\n  }).then(parseResponse);\n}\n\nexport function apiDeleteAccount(accountId) {\n  return Promise.reject({\n    message: '\\'Delete Account\\' is not implemented.'\n  });\n\n  return fetch(`${getAccountsUrl()}/${accountId}`, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"delete\"\n  }).then(parseResponse);\n}\n\nexport function apiRetrieveUsers(email) {\n  return fetch(`${getCustomersUrl()}?${makeQuery({ email })}`, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"get\"\n  }).then(parseResponse);\n}\n\nexport function apiRetrieveUser(customerId) {\n  return fetch(`${getCustomersUrl()}/${ customerId }`, {\n    headers: {\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"get\"\n  }).then(parseResponse);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/api.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nimport originalFetch from \"isomorphic-fetch\";\nimport * as C from \"./constants\";\n\nimport {\n  retrieveData,\n  persistData,\n  getTokenFormat,\n  isApiRequest\n} from \"./sessionStorage\";\n\n\nfunction getAuthHeaders(url) {\n  if (isApiRequest(url)) {\n    // fetch current auth headers from storage\n    let currentHeaders = retrieveData(C.SAVED_CREDS_KEY) || {},\n      nextHeaders = {};\n\n    if (currentHeaders === 'undefined') {\n      currentHeaders = {};\n    }\n    // bust IE cache\n    nextHeaders[\"If-Modified-Since\"] = \"Mon, 26 Jul 1997 05:00:00 GMT\";\n\n    // set header for each key in `tokenFormat` config\n    for (var key in getTokenFormat()) {\n      if (key in currentHeaders) {\n        nextHeaders[key] = currentHeaders[key];\n      }\n    }\n\n    return nextHeaders;\n  } else {\n    return {};\n  }\n}\n\nfunction updateAuthCredentials(resp) {\n\n  // check config apiUrl matches the current response url\n  if (isApiRequest(resp.url)) {\n    // set header for each key in `tokenFormat` config\n    var newHeaders = {};\n\n    // set flag to ensure that we don't accidentally nuke the headers\n    // if the response tokens aren't sent back from the API\n    var blankHeaders = true;\n\n    // set header key + val for each key in `tokenFormat` config\n    for (var key in getTokenFormat()) {\n      newHeaders[key] = resp.headers.get(key);\n\n      if (newHeaders[key]) {\n        blankHeaders = false;\n      }\n    }\n\n    // persist headers for next request\n    if (!blankHeaders) {\n      persistData(C.SAVED_CREDS_KEY, newHeaders);\n    }\n  }\n\n  return resp;\n}\n\nexport default function (url, options = {}) {\n\n  if (!options.headers) {\n    options.headers = {}\n  }\n\n  options.headers = {\n    ...options.headers,\n    ...getAuthHeaders(url)\n  };\n\n  //extend(options.headers, getAuthHeaders(url));\n  return originalFetch(url, options)\n    .then(resp => updateAuthCredentials(resp));\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/fetch.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nexport function parseResponse (response) {\n  let json = response.json();\n  if (response.status >= 200 && response.status < 300) {\n    return json;\n  } else {\n\n    //error: \"Bad Request\"\n    //exception: \"org.springframework.web.bind.MethodArgumentNotValidException\"\n    //message: \"Validation failed for argument at index 0 in method: public rx.Observable<net.chrisrichardson.eventstore.javaexamples.banking.common.customers.CustomerResponse> net.chrisrichardson.eventstore.javaexamples.banking.web.commandside.customers.CustomerController.createCustomer(net.chrisrichardson.eventstore.javaexamples.banking.common.customers.CustomerInfo), with 3 error(s): [Field error in object 'customerInfo' on field 'ssn': rejected value [null]; codes [NotNull.customerInfo.ssn,NotNull.ssn,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [customerInfo.ssn,ssn]; arguments []; default message [ssn]]; default message [may not be null]] [Field error in object 'customerInfo' on field 'email': rejected value [null]; codes [NotNull.customerInfo.email,NotNull.email,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [customerInfo.email,email]; arguments []; default message [email]]; default message [may not be null]] [Field error in object 'customerInfo' on field 'phoneNumber': rejected value [null]; codes [NotNull.customerInfo.phoneNumber,NotNull.phoneNumber,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [customerInfo.phoneNumber,phoneNumber]; arguments []; default message [phoneNumber]]; default message [may not be null]] \"\n    //path: \"/customers\"\n    //status: 400\n    //timestamp: 1458002123103\n\n    return json.then(({ message, ...rest }) => {\n      if (!message) {\n        return rest;\n      }\n      const jvmPattern = /\\[Field error in object '\\w+' on field '(\\w+)'/gm;\n      let errors = {};\n      message.replace(jvmPattern, (m, name) => {\n        errors[name] = ['Required'];\n      });\n\n      if (Object.keys(errors).length) {\n        return { errors };\n      }\n      return { errors: message };\n    }).then(err => Promise.reject(err));\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/handleFetchResponse.js\n **/","/**\n * Created by andrew on 27/02/16.\n */\nimport T from '../constants/ACTION_TYPES';\nimport { makeActionCreator } from '../utils/actions';\nimport * as api from '../utils/api';\nimport { authenticate } from './authenticate';\nimport root from '../utils/root';\n\nexport const entityRequested = makeActionCreator(T.ENTITIES.REQUESTED, 'id');\nexport const entityReceived = makeActionCreator(T.ENTITIES.RECEIVED, 'id', 'entity');\n\nexport const accountsListRequested = makeActionCreator(T.ACCOUNTS.LIST_START);\nexport const accountsListReceived = makeActionCreator(T.ACCOUNTS.LIST_COMPLETE, 'payload');\nexport const accountsListError = makeActionCreator(T.ACCOUNTS.LIST_ERROR, 'error');\n\nexport const accountsRefListReceived = makeActionCreator(T.ACCOUNTS.LIST_REF_COMPLETE, 'payload');\n\nexport const accountCreateStart = makeActionCreator(T.ACCOUNTS.CREATE_START);\nexport const accountCreateComplete = makeActionCreator(T.ACCOUNTS.CREATE_COMPLETE, 'payload');\nexport const accountCreateError = makeActionCreator(T.ACCOUNTS.CREATE_ERROR, 'error');\nexport const accountCreateFormUpdate = makeActionCreator(T.ACCOUNTS.CREATE_FORM_UPDATE, 'key', 'value');\n\nexport const accountRefCreateStart = makeActionCreator(T.ACCOUNTS.CREATE_REF_START);\nexport const accountRefCreateComplete = makeActionCreator(T.ACCOUNTS.CREATE_REF_COMPLETE, 'payload');\nexport const accountRefCreateError = makeActionCreator(T.ACCOUNTS.CREATE_REF_ERROR, 'error');\nexport const accountRefCreateFormUpdate = makeActionCreator(T.ACCOUNTS.CREATE_REF_FORM_UPDATE,  'key', 'value');\n\nexport const accountRequested = makeActionCreator(T.ACCOUNT.SINGLE_START);\nexport const accountComplete = makeActionCreator(T.ACCOUNT.SINGLE_COMPLETE, 'payload');\nexport const accountError = makeActionCreator(T.ACCOUNT.SINGLE_ERROR, 'error');\n\n\nexport function accountsList(userId) {\n  return dispatch => {\n    dispatch(accountsListRequested());\n    return api.apiRetrieveAccounts(userId)\n      .then(list => {\n        dispatch(accountsListReceived(list));\n      })\n      .catch(err => {\n        dispatch(accountsListError(err));\n        return Promise.resolve({ error: err });\n      })\n  };\n}\n\nfunction readUntilChanged(initialData, customerId) {\n  const initialDataFlat = root['JSON'].stringify(initialData);\n  debugger;\n  return new Promise((rs, rj) => {\n    setTimeout(() => {\n      api.apiRetrieveAccounts(customerId)\n        .then(data => {\n          debugger;\n          if (initialDataFlat == root['JSON'].stringify(data)) {\n            return readUntilChanged.call(this, data, customerId).then(rs, rj); // Promise\n          }\n          rs(data);\n        })\n        .catch(rj)\n    }, 500);\n  })\n}\n\nexport function accountCreate(customerId, payload) {\n  return dispatch => {\n    dispatch(accountCreateStart());\n    return api.apiCreateAccount(customerId, payload)\n      .then(data => {\n        if (data.accountId) {\n          const { accountId } = data;\n          dispatch(accountCreateComplete({\n            id: accountId,\n            ...payload\n          }));\n          // dispatch(entityReceived(accountId, payload));\n          dispatch(authenticate(true));\n          return accountId;\n        } else {\n          return readUntilChanged(data, customerId)\n            .then(() => {\n              dispatch(accountCreateComplete({\n                id: ''\n              }));\n              dispatch(authenticate(true));\n            });\n        }\n      })\n      .catch(err => {\n        debugger;\n        dispatch(accountCreateError(err));\n        // return Promise.resolve({ error: err });\n      });\n  };\n}\n\nexport function accountRefCreate(customerId, payload) {\n  return dispatch => {\n    dispatch(accountRefCreateStart());\n    return api.apiCreateRefAccount(customerId, payload)\n      .then(({ id }) => {\n        dispatch(accountRefCreateComplete({\n          ...payload,\n          id\n        }));\n        dispatch(entityReceived(id, payload));\n        return dispatch(authenticate(true));\n      })\n      .catch(err => {\n        debugger;\n        dispatch(accountRefCreateError(err));\n        return Promise.resolve({ error: err });\n      })\n  };\n}\n\n\n\n\nexport function fetchOwnAccounts(customerId) {\n  return dispatch => {\n    //dispatch(accountsListRequested());\n    return api.apiRetrieveAccounts(customerId)\n      .then(data => {\n        dispatch(accountsListReceived(data.accounts));\n      });\n  };\n}\n\nexport function fetchAccount(accountId) {\n  return dispatch => {\n    dispatch(accountRequested());\n    return api.apiRetrieveAccount(accountId)\n      .then(data => {\n        dispatch(accountComplete(data));\n      })\n      .catch(err => {\n        dispatch(accountError(err));\n      });\n  };\n}\n\nexport const deleteAccountRequested = makeActionCreator(T.ACCOUNT.DELETE_START);\nexport const deleteAccountComplete = makeActionCreator(T.ACCOUNT.DELETE_COMPLETE);\nexport const deleteAccountError = makeActionCreator(T.ACCOUNT.DELETE_ERROR);\n\nexport function deleteAccount(customerId, accountId) {\n  return dispatch => {\n    dispatch(deleteAccountRequested());\n    return api.apiDeleteAccount(accountId)\n      .then(data => {\n        //debugger;\n        dispatch(deleteAccountComplete());\n        return Promise.resolve('ok');\n      })\n      .catch(err => {\n        dispatch(deleteAccountError());\n        return Promise.reject(err);\n      })\n  };\n}\n\nexport const errorMessageStart = makeActionCreator(T.ERROR.START, 'payload');\nexport const errorMessageStop = makeActionCreator(T.ERROR.STOP);\n\nexport function errorMessageTimedOut(error, timeout) {\n  return dispatch => {\n    dispatch(errorMessageStart(error));\n    setTimeout(() => {\n      dispatch(errorMessageStop());\n    }, timeout || 5000);\n  };\n}\n\nexport const createRefOwnerLookupStart = makeActionCreator(T.ACCOUNTS.CREATE_REF_OWNER_LOOKUP_START, 'payload');\nexport const createRefOwnerLookupComplete = makeActionCreator(T.ACCOUNTS.CREATE_REF_OWNER_LOOKUP_COMPLETE, 'payload');\n\nexport const createRefAccountLookupStart = makeActionCreator(T.ACCOUNTS.CREATE_REF_ACCOUNT_LOOKUP_START, 'payload');\nexport const createRefAccountLookupComplete = makeActionCreator(T.ACCOUNTS.CREATE_REF_ACCOUNT_LOOKUP_COMPLETE, 'payload');\n\nexport const createRefOwnerLookup = lookup => {\n  return dispatch => {\n    dispatch(createRefOwnerLookupStart(lookup));\n    return api.apiRetrieveUsers(lookup)\n      .then(data => {\n\n        const { customers = [] } = data || {};\n\n        const arr = customers.map(c => {\n          const { id, name, email } = c;\n          const fullName = ([name.firstName, name.lastName]).filter(i => i).join(' ');\n          const label = email ? `${ fullName } (${ email })` : fullName;\n          return {\n            value: id,\n            label\n          };\n        });\n        dispatch(createRefOwnerLookupComplete(arr));\n        return { options: arr };\n      })\n      .catch(err => {\n        dispatch(createRefOwnerLookupComplete([]));\n        return { options: [] };\n      });\n  };\n};\n\nexport const createRefAccountLookup = customerId => {\n  return dispatch => {\n    dispatch(createRefAccountLookupStart());\n    return api.apiRetrieveAccounts(customerId)\n      .then(({ accounts }) => {\n        const arr = accounts.map(({ accountId, title }) => ({\n          value: accountId,\n          label: title\n        }));\n        dispatch(createRefAccountLookupComplete(arr));\n        return { options: arr };\n      })\n      .catch(err => {\n        dispatch(createRefAccountLookupComplete([]));\n        return { options: [] };\n      });\n  };\n};\n\n\nexport const makeTransferRequested = makeActionCreator(T.TRANSFERS.MAKE_START);\nexport const makeTransferComplete = makeActionCreator(T.TRANSFERS.MAKE_COMPLETE, 'payload');\nexport const makeTransferError = makeActionCreator(T.TRANSFERS.MAKE_ERROR, 'error');\nexport const makeTransferFormUpdate = makeActionCreator(T.TRANSFERS.MAKE_FORM_UPDATE, 'key', 'value');\n\nexport const makeTransfer = (accountId, payload) => {\n  return dispatch => {\n    dispatch(makeTransferRequested());\n    return api.apiMakeTransfer(accountId, payload)\n      .then(data => {\n        const { moneyTransferId } = data;\n        dispatch(makeTransferComplete(data));\n        return moneyTransferId;\n      })\n      .catch(err => {\n        dispatch(makeTransferError(err));\n        return err;\n      });\n  };\n};\n\nexport const getTransfersRequested = makeActionCreator(T.TRANSFERS.LIST_START, 'id');\nexport const getTransfersComplete = makeActionCreator(T.TRANSFERS.LIST_COMPLETE, 'id', 'payload');\nexport const getTransfersError = makeActionCreator(T.TRANSFERS.LIST_ERROR, 'id', 'error');\n\nexport const getTransfers = (accountId) => {\n  return dispatch => {\n    dispatch(getTransfersRequested(accountId));\n    return api.apiRetrieveTransfers(accountId)\n      .then(data => {\n        dispatch(getTransfersComplete(accountId, data.transactionsHistory));\n        return data;\n      })\n      .catch(err => {\n        dispatch(getTransfersError(accountId, err));\n        return err;\n      });\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/entities.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\n\nimport * as C from \"./constants\";\nimport root from './root';\n\nimport fetch from \"./fetch\";\n\nimport parseEndpointConfig from \"./parseEndpointConfig\";\nimport { setEndpointKeys } from \"../actions/configure\";\n\nimport {\n  getCurrentSettings,\n  setCurrentSettings,\n  getInitialEndpointKey,\n  setDefaultEndpointKey,\n  setCurrentEndpoint,\n  setCurrentEndpointKey,\n  retrieveData,\n  persistData,\n  destroySession\n} from \"./sessionStorage\";\n\nconst defaultSettings = {\n  //proxyIf:            function() { return false; },\n  //proxyUrl:           \"/proxy\",\n  forceHardRedirect:  false,\n  storage:            \"cookies\",\n  cookieExpiry:       14,\n  cookiePath:         \"/\",\n  initialCredentials: null,\n\n  passwordResetSuccessUrl: function() {\n    return root.location.href;\n  },\n\n  confirmationSuccessUrl:  function() {\n    return root.location.href;\n  },\n\n  tokenFormat: {\n    \"access-token\": \"{{ access-token }}\"\n    //\"token-type\":   \"Bearer\",\n    //client:         \"{{ client }}\",\n    //expiry:         \"{{ expiry }}\",\n    //uid:            \"{{ uid }}\"\n  },\n\n  parseExpiry: function(headers){\n    // convert from ruby time (seconds) to js time (millis)\n    return (parseInt(headers[\"expiry\"], 10) * 1000) || null;\n  },\n\n  handleLoginResponse: function(resp) {\n    return resp.data;\n  },\n\n  handleAccountUpdateResponse: function(resp) {\n    return resp.data;\n  },\n\n  handleTokenValidationResponse: function(resp) {\n    return resp.data;\n  }\n};\n\n\n// save session configuration\nexport function applyConfig({ dispatch, endpoint={}, settings={}, reset=false } = {}) {\n\n  if (settings.currentLocation && settings.currentLocation.match(/blank=true/)) {\n    return Promise.resolve({blank: true});\n  }\n\n  let currentEndpointKey;\n\n  if (reset) {\n    resetConfig();\n  }\n\n  if (settings.initialCredentials) {\n    currentEndpointKey = settings.initialCredentials.currentEndpointKey;\n  }\n\n  setCurrentSettings({ ...defaultSettings, ...settings });\n\n  const currentHeaders = retrieveData(C.SAVED_CREDS_KEY) || {};\n\n  const accessToken = currentHeaders[\"access-token\"];\n\n  //if (authRedirectHeaders && authRedirectHeaders[\"access-token\"]) {\n  if (!accessToken) {\n    destroySession();\n  }\n\n\n  let { defaultEndpointKey, currentEndpoint } = parseEndpointConfig(\n    endpoint, getInitialEndpointKey()\n  );\n\n  if (!currentEndpointKey) {\n    currentEndpointKey = defaultEndpointKey;\n  }\n\n  // persist default config key with session storage\n  setDefaultEndpointKey(defaultEndpointKey);\n  setCurrentEndpoint(currentEndpoint);\n\n  dispatch(setEndpointKeys(\n    Object.keys(currentEndpoint),\n    currentEndpointKey,\n    defaultEndpointKey));\n\n  setCurrentEndpointKey(currentEndpointKey);\n\n\n\n  return Promise.resolve();\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/clientSettings.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nimport * as C from \"./constants\";\n\n// base endpoint that other endpoints extend from\nconst defaultEndpoint = {\n  apiUrl:                \"/api\",\n  signOutPath:           \"/auth/sign_out\",\n  emailSignInPath:       \"/auth/sign_in\",\n  emailRegistrationPath: \"/auth\",\n  accountUpdatePath:     \"/auth\",\n  accountDeletePath:     \"/auth\",\n  passwordResetPath:     \"/auth/password\",\n  passwordUpdatePath:    \"/auth/password\",\n  tokenValidationPath:   \"/auth/validate_token\",\n\n  authProviderPaths: {\n    github:    \"/auth/github\",\n    facebook:  \"/auth/facebook\",\n    google:    \"/auth/google_oauth2\"\n  }\n};\n\nfunction getFirstObjectKey (obj) {\n  for (var key in obj) {\n    return key;\n  }\n}\n\nexport default function parseEndpointConfig(endpoint, defaultEndpointKey = null) {\n  // normalize so opts is always an array of objects\n  if (endpoint.constructor !== Array) {\n    // single config will always be called 'default' unless set\n    // by previous session\n    defaultEndpointKey = C.INITIAL_CONFIG_KEY;\n\n    // config should look like {default: {...}}\n    var defaultConfig = {};\n    defaultConfig[defaultEndpointKey] = endpoint;\n\n    // endpoint should look like [{default: {...}}]\n    endpoint = [defaultConfig];\n  }\n\n  let currentEndpoint = {};\n\n  // iterate over config items, extend each from defaults\n  for (var i = 0; i < endpoint.length; i++) {\n    var configName = getFirstObjectKey(endpoint[i]);\n\n    // set first as default config\n    if (!defaultEndpointKey) {\n      defaultEndpointKey = configName;\n    }\n\n    // save config to `configs` hash\n    currentEndpoint[configName] = {\n      ...defaultEndpoint,\n      ...endpoint[i][configName]\n    };\n  }\n\n  return { defaultEndpointKey, currentEndpoint };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/parseEndpointConfig.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nimport querystring from \"querystring\";\n\nexport function normalizeTokenKeys (params) {\n  // normalize keys\n  if (params.token) {\n    params[\"access-token\"] = params.token;\n    delete params.token;\n  }\n  if (params.auth_token) {\n    params[\"access-token\"] = params.auth_token;\n    delete params.auth_token;\n  }\n  if (params.client_id) {\n    params.client = params.client_id;\n    delete params.client_id;\n  }\n  if (params.config) {\n    params.endpointKey = params.config;\n    delete params.config;\n  }\n\n  return params;\n};\n\nconst getAnchorSearch = function(location) {\n  const rawAnchor = location.hash || \"\",\n        arr       = rawAnchor.split(\"?\");\n  return (arr.length > 1) ? arr[1] : null;\n};\n\nconst getSearchQs = function(location) {\n  const rawQs = location.search || \"\",\n        qs    = rawQs.replace(\"?\", \"\"),\n        qsObj = (qs) ? querystring.parse(qs) : {};\n\n  return qsObj;\n};\n\nconst getAnchorQs = function(location) {\n  const anchorQs    = getAnchorSearch(location),\n        anchorQsObj = (anchorQs) ? querystring.parse(anchorQs) : {};\n\n  return anchorQsObj;\n};\n\nconst stripKeys = function(obj, keys) {\n  for (var q in keys) {\n    delete obj[keys[q]];\n  }\n\n  return obj;\n};\n\nexport function getAllParams (location) {\n  return {\n    ...getAnchorQs(location),\n    ...getSearchQs(location)\n  };\n};\n\nconst buildCredentials = function(location, keys) {\n  const params = getAllParams(location);\n  let authHeaders = {};\n\n  for (var key of keys) {\n    authHeaders[key] = params[key];\n  }\n\n  return normalizeTokenKeys(authHeaders);\n};\n\n\n// this method is tricky. we want to reconstruct the current URL with the\n// following conditions:\n// 1. search contains none of the supplied keys\n// 2. anchor search (i.e. `#/?key=val`) contains none of the supplied keys\n// 3. all of the keys NOT supplied are presevered in their original form\n// 4. url protocol, host, and path are preserved\nconst getLocationWithoutParams = function(currentLocation, keys) {\n  // strip all values from both actual and anchor search params\n  let newSearch   = querystring.stringify(stripKeys(getSearchQs(currentLocation), keys)),\n      newAnchorQs = querystring.stringify(stripKeys(getAnchorQs(currentLocation), keys)),\n      newAnchor   = (currentLocation.hash || \"\").split(\"?\")[0];\n\n  if (newSearch) {\n    newSearch = \"?\" + newSearch;\n  }\n\n  if (newAnchorQs) {\n    newAnchor += \"?\" + newAnchorQs;\n  }\n\n  if (newAnchor && !newAnchor.match(/^#/)) {\n    newAnchor = \"#/\" + newAnchor;\n  }\n\n  // reconstruct location with stripped auth keys\n  const newLocation = currentLocation.pathname + newSearch + newAnchor;\n\n  return newLocation;\n};\n\n\n\nexport default function getRedirectInfo(currentLocation) {\n  if (!currentLocation) {\n    return {};\n  } else {\n    let authKeys = [\n      \"access-token\",\n      \"token\",\n      \"auth_token\",\n      \"config\",\n      \"client\",\n      \"client_id\",\n      \"expiry\",\n      \"uid\",\n      \"reset_password\",\n      \"account_confirmation_success\"\n    ];\n\n    var authRedirectHeaders = buildCredentials(currentLocation, authKeys);\n    var authRedirectPath = getLocationWithoutParams(currentLocation, authKeys);\n\n    if (authRedirectPath !== currentLocation) {\n      return { authRedirectHeaders, authRedirectPath };\n    } else {\n      return {};\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/parseUrl.js\n **/","/**\n * Created by andrew on 21/02/16.\n */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { pushState } from 'redux-router';\n\nimport read from '../utils/readProp';\n\nexport function requireAuthentication(Component) {\n\n  class AuthComponent extends React.Component {\n\n    checkRedirect(props) {\n      if (!props.isAuthenticated) {\n          // redirect to login and add next param so we can redirect again after login\n        const redirectAfterLogin = props.location.pathname;\n        props.dispatch(pushState(null, `/signin?next=${redirectAfterLogin}`));\n      }\n    }\n\n    componentWillMount() {\n      this.checkRedirect(this.props);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      this.checkRedirect(nextProps);\n    }\n\n    render() {\n\n      const { isAuthenticated = false } = this.props;\n\n      if (isAuthenticated) {\n        // render the component that requires auth (passed to this wrapper)\n        return (\n          <Component  {...this.props} />\n        )\n      }\n\n      return (<div className=\"panel\">\n        <h2 className=\"text-danger\">No anonymous access!</h2>\n      </div>);\n\n    }\n  }\n\n  const mapStateToProps =\n    (state) => {\n      return ({\n        isAuthenticated: read(state, 'app.auth.user.isSignedIn', false)\n      })\n    };\n\n  return connect(mapStateToProps)(AuthComponent);\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/AuthComponent.js\n **/","/**\n * Created by andrew on 11/03/16.\n */\nexport default function read(src, path = '', defaultVal = null) {\n  const [pathItem = null, ...rest] = path.split('.');\n\n  if (pathItem === null ) {\n    return src || defaultVal;\n  } else if (rest.length === 0) {\n    if (!src) { return defaultVal; }\n    return src[pathItem] || defaultVal;\n  }\n\n  if (!src) { return defaultVal; }\n  return read(src[pathItem], rest.join('.'), defaultVal);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/readProp.js\n **/","/**\n * Created by andrew on 17/02/16.\n */\nimport React, { PropTypes } from \"react\";\nimport { Grid, Col, Navbar, NavItem, Nav, NavbarBrand, Footer } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\n\nimport HeaderLinks from '../HeaderLinks';\n\n//import { SignOutButton } from \"redux-auth/bootstrap-theme\";\n\n//const SignOutButton = () => (<div>SignOutButton!</div>);\n\nclass Container extends React.Component {\n  static propTypes = {\n    children: PropTypes.node\n  };\n\n  render () {\n    return (\n      <div className=\"wrapper\">\n        <Navbar className=\"main-nav\">\n          <LinkContainer to=\"/\">\n            <NavbarBrand>Money Transfer</NavbarBrand>\n          </LinkContainer>\n          <Nav>\n            <LinkContainer to=\"/\" onlyActiveOnIndex={true}>\n              <NavItem eventKey={1}>Home</NavItem>\n            </LinkContainer>\n          </Nav>\n          <div>\n            <HeaderLinks />\n          </div>\n        </Navbar>\n\n        <Grid className=\"content\">\n          {this.props.children}\n        </Grid>\n\n        <Navbar fixedBottom={true} className=\"footer-navigation\">\n          <Col xs={12} sm={6}>&copy; 2016 Eventuate.io</Col>\n          <Col xs={12} sm={6} className=\"text-right\">\n            <a href=\"#\">Terms</a> |&nbsp;\n            <a href=\"#\">Policy</a> |&nbsp;\n            <a href=\"#\">Contact</a> |&nbsp;\n            <a href=\"#\">About</a>\n          </Col>\n        </Navbar>\n      </div>\n    );\n  }\n}\n/*<a href=\"https://github.com/lynndylanhurley/redux-auth\">\n <img\n style={{position: \"absolute\", top: 0, right: 0, border: 0}}\n src=\"https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67\"\n alt=\"Fork me on GitHub\"\n data-canonical-src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\" />\n </a>*/\nexport default Container;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/partials/Container.js\n **/","/**\n * Created by andrew on 11/03/16.\n */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { LinkContainer } from \"react-router-bootstrap\";\n\nimport read from '../utils/readProp';\n\n//import { PageHeader, OverlayTrigger, Tooltip, Grid, Col, Row, Nav, NavItem, ButtonGroup, Button, Table } from \"react-bootstrap\";\nimport * as BS from \"react-bootstrap\";\nimport { Link, IndexLink } from \"react-router\";\n\nimport { signOut } from '../actions/signOut';\n\n\nexport class HeaderLinks extends React.Component {\n\n  signOut(evt, key) {\n    this.props.dispatch(signOut());\n  }\n\n  render() {\n\n    let buttonSet = null;\n    const isSignedIn = read(this.props.auth, 'user.isSignedIn', false);\n    const { location } = this.props.router;\n    const isRegister = location.pathname == '/register';\n    const isLogin = location.pathname == '/signin';\n\n    const condition = isSignedIn ? 2 : (isRegister ? 1 : 0);\n    \n    switch (condition) {\n      case 0:\n        buttonSet = (<LinkContainer to=\"/register\">\n          <BS.NavItem>Register</BS.NavItem>\n        </LinkContainer>);\n        break;\n      case 1:\n        buttonSet = (<LinkContainer to=\"/signin\">\n          <BS.NavItem>Log In</BS.NavItem>\n        </LinkContainer>);\n        break;\n      case 2:\n        buttonSet = (<BS.NavItem onClick={this.signOut.bind(this)} eventKey=\"2\">Sign Out</BS.NavItem>);\n        break;\n    }\n\n    return (\n      <BS.Nav pullRight={true}>\n        { buttonSet }\n      </BS.Nav>\n    );\n  }\n}\n\nexport default connect(({\n  //dispatch,\n  router,\n  app\n  }) => ({\n  //dispatch,\n  router,\n  auth: app.auth\n}))(HeaderLinks);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/HeaderLinks.js\n **/","/**\n * Created by andrew on 11/03/16.\n */\nimport {\n  getEmailSignInUrl,\n  setCurrentEndpointKey,\n  getCurrentEndpointKey\n} from \"../utils/sessionStorage\";\n\nimport {destroySession} from \"../utils/sessionStorage\";\n\n\nimport { entityReceived } from './entities';\nimport { storeCurrentEndpointKey } from \"./configure\";\nimport { parseResponse } from \"../utils/handleFetchResponse\";\nimport fetch from \"../utils/fetch\";\n\nimport T from '../constants/ACTION_TYPES';\n\nimport root from '../utils/root';\n\nexport function signOutStart() {\n  return { type: T.AUTH.SIGN_OUT_START };\n}\n\nexport function signOutComplete() {\n  return { type: T.AUTH.SIGN_OUT_COMPLETE };\n}\n\nexport function signOut() {\n  return dispatch => {\n\n    dispatch(signOutStart());\n\n    destroySession();\n\n    dispatch(signOutComplete());\n\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/signOut.js\n **/","/**\n * Created by andrew on 17/02/16.\n */\nimport React from \"react\";\nimport { PageHeader, OverlayTrigger, Tooltip, Grid, Col, Row, Nav, NavItem, ButtonGroup, Button, Table } from \"react-bootstrap\";\nimport * as BS from \"react-bootstrap\";\nimport { Link, IndexLink} from \"react-router\";\nimport { connect } from \"react-redux\";\n//import * as DefaultTheme from \"redux-auth\";\nimport Select from \"react-select\";\nimport * as Modals from './modals';\nimport IndexPanel from \"./../components/partials/IndexPanel\";\n\nimport * as A from '../actions/entities';\nimport read from '../utils/readProp';\nimport { Money } from '../components/Money';\n\n\n\nconst resetModals = {\n  showAccountModal: false,\n  show3rdPartyAccountModal: false,\n  showDeleteAccountModal: false\n};\n\nclass MyAccounts extends React.Component {\n\n  constructor(...args) {\n    super(...args);\n    this.state = { ...resetModals };\n  }\n\n  componentWillMount() {\n    const {\n      id: customerId\n      } = this.props.auth.user.attributes;\n    this.props.dispatch(A.fetchOwnAccounts(customerId));\n  }\n\n  createAccountModal() {\n    this.setState({\n      showAccountModal: true\n    });\n  }\n\n  createAccountModalConfirmed(payload) {\n\n    const {\n      id: customerId\n      } = this.props.auth.user.attributes;\n\n    this.props.dispatch(A.accountCreate(customerId, payload))\n      .then((accountId) => {\n        this.close();\n        // return new Promise((rs, rj) => {\n          setTimeout(() => {\n            this.props.dispatch(A.fetchOwnAccounts(customerId)); //.then(rs, rj);\n          }, 1500);\n        // });\n      })\n      .catch(err => {\n        // debugger;\n        this.props.dispatch(A.accountCreateError(err));\n      });\n  }\n\n  create3rdPartyAccountModal() {\n    this.setState({\n      show3rdPartyAccountModal: true\n    });\n  }\n\n  create3rdPartyAccountModalConfirmed(payload) {\n    const {\n      id: customerId\n    } = this.props.auth.user.attributes;\n\n    this.props.dispatch(A.accountRefCreate(customerId, payload))\n      .then(() => {\n        this.close();\n        return new Promise((rs, rj) => {\n          setTimeout(() => {\n            this.props.dispatch(A.fetchOwnAccounts(customerId)).then(rs, rj);\n          }, 1500);\n        })\n      })\n      .catch(err => {\n        // debugger;\n        this.props.dispatch(A.accountRefCreateError(err));\n      });\n  }\n\n  remove3rdPartyAccountModal(accountId, evt) {\n    const account = this.props.app.entities[accountId];\n    this.setState({\n      accountToRemove: account,\n      showDeleteAccountModal: true\n    });\n  }\n\n  remove3rdPartyAccountModalConfirmed(accountId) {\n    const { customerId } = this.props;\n    this.props.dispatch(A.deleteAccount(customerId, accountId))\n    .then(() => {\n        this.close();\n    },\n    err => {\n      this.props.dispatch(A.errorMessageTimedOut(err && err.message || err));\n      this.close();\n    });\n  }\n\n  close() {\n    this.setState({\n      ...resetModals\n    });\n  }\n\n  render () {\n\n    //const deployTooltip = (<Tooltip>\n    //  Create a new instance of this demo on your own Heroku server.\n    //</Tooltip>);\n    const user = this.props.auth.user.attributes;\n    const {\n      id: customerId,\n      email = '',\n      ssn = '',\n      name = {},\n      phoneNumber = '',\n      address,\n      toAccounts\n      } = user;\n\n    const firstName = name.firstName || '';\n    const lastName = name.lastName || '';\n\n    const {\n      city,\n      state,\n      street1,\n      street2,\n      zipCode\n      } = address;\n\n    const {\n      showAccountModal,\n      show3rdPartyAccountModal,\n      showDeleteAccountModal } = this.state;\n\n    const { accountToRemove = null} = this.state;\n\n    const { error } = this.props;\n    const errorLine = error ? (<BS.Panel bsStyle=\"danger\"><strong>{ error }</strong></BS.Panel>) : [];\n\n    const ownAccountsData = this.props.app.accounts.own || [];\n\n    //accountId: \"000001537c2cf075-a250093f26850000\"\n    //balance: 0\n    //description: null\n    //title: \"Sample\"\n\n    const ownAccounts = ownAccountsData.map(({\n      accountId, balance, description = '', title\n      }, idx) => (\n      <tr key={`own_${idx}`}>\n        <td key={0}><Link to={`/account/${accountId}`}>{ title }</Link>{\n          (description) ? [\n            (<br />),\n            <span>{ description }</span>\n          ]: null\n        }</td>\n        <td key={1}><Money amount={balance} /></td>\n        <td key={2}><BS.Button bsStyle={\"link\"} onClick={this.remove3rdPartyAccountModal.bind(this, accountId)}><BS.Glyphicon glyph=\"remove\" /></BS.Button></td>\n      </tr>\n    ));\n\n    const refAccountsData = this.props.app.accounts.other || [];\n    const refAccounts = refAccountsData.map(({\n      title,\n      description = '',\n      id\n      }, idx) => (\n      <tr key={`ref_${idx}`}>\n        <td key={0}><Link to={`/account/${id}`}>{ title }</Link>{\n          (description) ? [\n            (<br />),\n            <span>{ description }</span>\n          ]: null\n        }\n        </td>\n        <td key={1}></td>\n        <td key={2}><Button pullRight={true} bsStyle={\"link\"} onClick={this.remove3rdPartyAccountModal.bind(this, id)}><BS.Glyphicon glyph=\"remove\" /></Button>\n        </td>\n      </tr>\n    ));\n\n    const accounts = (!!(ownAccounts.length + refAccounts.length)) ? [].concat(ownAccounts, refAccounts) : (<tr>\n      <td colSpan={3}>No account exists: <Button bsStyle={\"link\"} onClick={this.createAccountModal.bind(this)}>create a new one</Button> or <Button bsStyle={\"link\"} onClick={this.create3rdPartyAccountModal.bind(this)}>add a recipient</Button></td>\n    </tr>);\n\n    return (\n      <div>\n        <PageHeader>\n            My Accounts\n          <Nav pullRight={true}>\n            <ButtonGroup>\n              <Button bsStyle={\"link\"} onClick={this.createAccountModal.bind(this)}>Create Account</Button>\n              <Button bsStyle={\"link\"} onClick={this.create3rdPartyAccountModal.bind(this)}>Add 3rd Party Recipients</Button>\n            </ButtonGroup>\n          </Nav>\n        </PageHeader>\n\n        { errorLine }\n\n        <Row>\n          <IndexPanel header=\"Personal Info:\">\n\n            <Row>\n              <Col xs={4}>Customer:</Col>\n              <Col xs={8}><strong>{ `${firstName} ${lastName}` }</strong></Col>\n            </Row>\n\n            <Row>\n              <Col xs={4}>Email:</Col>\n              <Col xs={8}><strong>{ email }</strong></Col>\n            </Row>\n\n            <Row>\n              <Col xs={4}>Phone:</Col>\n              <Col xs={8}><strong>{ phoneNumber }</strong></Col>\n            </Row>\n\n            <Row>\n              <Col xs={4}>SSN:</Col>\n              <Col xs={8}><strong>{ ssn }</strong></Col>\n            </Row>\n\n\n          </IndexPanel>\n\n        </Row>\n\n        <Table>\n          <thead>\n          <tr>\n            <th>Account Title</th>\n            <th>Balance</th>\n            <th></th>\n          </tr>\n          </thead>\n          <tbody>\n          { accounts }\n          </tbody>\n        </Table>\n\n\n        <Modals.NewAccountModal show={showAccountModal}\n                                action={this.createAccountModalConfirmed.bind(this)}\n                                account={ this.props.app.accounts.create }\n                                onHide={this.close.bind(this)}\n                                key={0} />\n\n        <Modals.Add3rdPartyAccountModal show={show3rdPartyAccountModal}\n                                        action={this.create3rdPartyAccountModalConfirmed.bind(this)}\n                                        onHide={this.close.bind(this)}\n                                        key={1} />\n\n        <Modals.RemoveAccountBookmarkModal show={showDeleteAccountModal}\n                                           account={accountToRemove}\n                                           action={this.remove3rdPartyAccountModalConfirmed.bind(this)}\n                                           onHide={this.close.bind(this)}\n                                           key={2} />\n\n      </div>\n    );\n  }\n}\n\nexport default connect(({ app }) => {\n  return ({\n    auth: app.auth,\n    app: app.data,\n    customerId: read(app, 'auth.user.isSignedIn', false) ? read(app, 'auth.user.attributes.id', null): null,\n    error: app.ui.error\n  })\n})(MyAccounts);\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/MyAccounts.js\n **/","/**\n * Created by andrew on 20/02/16.\n */\nexport { default as Add3rdPartyAccountModal } from './Add3rdPartyAccountModal';\nexport { default as NewAccountModal } from './NewAccountModal';\nexport { default as RemoveAccountBookmarkModal } from './RemoveAccountModal';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/modals/index.js\n **/","/**\n * Created by andrew on 20/02/16.\n */\nimport React from \"react\";\n// import { PageHeader, OverlayTrigger, Modal, Tooltip, Grid, Col, Row, Nav, NavItem, ButtonGroup, Button, Table } from \"react-bootstrap\";\nimport * as BS from \"react-bootstrap\";\nimport ButtonLoader from \"../../controls/bootstrap/ButtonLoader\";\nimport Input from \"../../controls/bootstrap/Input\";\nimport AuxErrorLabel from \"../../controls/bootstrap/AuxErrorLabel\";\nimport read from '../../utils/readProp';\n\nimport { Link, IndexLink} from \"react-router\";\nimport { connect } from \"react-redux\";\nimport Select from \"react-select\";\n\nimport * as A from '../../actions/entities';\n\nconst formValidation = (payload) => ['owner', 'account', 'title', 'description'].reduce((memo, prop) => {\n  let result = [];\n  const value = (payload[prop] || '').replace(/(^\\s+)|(\\s+$)/g, '');\n\n  switch (prop) {\n    case 'owner':\n    case 'account':\n    case 'title':\n      if (/^$/.test(value)) {\n        result.push('required');\n      }\n  }\n\n  switch (prop) {\n    case 'description':\n      if (value.length > 400) {\n        result.push('need to less than 400 symbols long');\n      }\n  }\n\n  if (result.length) {\n    memo[prop] = result;\n    memo.hasErrors = true;\n  }\n  return memo;\n}, {});\n\n\nexport class Add3rdPartyAccountModal extends React.Component {\n\n  handleInput(key, value) {\n    this.props.dispatch(A.accountRefCreateFormUpdate(key, value));\n    switch(key) {\n      case 'owner':\n        if (value) {\n          this.props.dispatch(A.createRefAccountLookup(value));\n        } else {\n          this.props.dispatch(A.createRefAccountLookupComplete([]));\n        }\n    }\n  }\n\n  handleSubmit(evt) {\n    evt.preventDefault();\n\n    const payload = { ...this.props.data.form };\n\n    const validationErrors = formValidation(payload);\n    if (validationErrors.hasErrors) {\n      this.props.dispatch(A.accountRefCreateError(validationErrors));\n      return;\n    }\n\n    const { action } = this.props;\n\n    if (action) {\n      action(payload);\n    }\n  }\n\n  onHide() {\n    this.props.dispatch(A.accountRefCreateComplete({}));\n    if (this.props.onHide) {\n      this.props.onHide();\n    }\n  }\n\n  getOwnersOptions(input) {\n    if (!input) {\n      return Promise.resolve({ options: [] });\n    }\n    return this.props.dispatch(A.createRefOwnerLookup(input));\n  }\n\n  render() {\n    const disabled = read(this.props.data, 'loading', false);\n\n    const ownersLoading = read(this.props.data, 'ownersLookup.loading', false);\n\n    const formErrors = read(this.props.data, 'errors.errors', '');\n\n    return (\n      <BS.Modal show={this.props.show} onHide={this.onHide.bind(this)} key={1}>\n        <BS.Modal.Header closeButton>\n          <BS.Modal.Title>Add 3rd Party Account</BS.Modal.Title>\n        </BS.Modal.Header>\n        <BS.Modal.Body>\n          <form>\n            <div className=\"form-group\" style={{\n            display: formErrors ? 'block' : 'none'\n            }}>\n              <AuxErrorLabel\n                label=\"Form:\"\n                errors={formErrors.length ? [formErrors] : [] }\n              />\n            </div>\n\n            <label>Owner:</label>\n            <div className=\"form-group\">\n              <Select\n                name=\"owner\"\n                onBlurResetsInput={false}\n                asyncOptions={this.getOwnersOptions.bind(this)}\n                matchProp=\"label\"\n                onChange={this.handleInput.bind(this, 'owner')}\n                value={read(this.props.data, 'form.owner', '')}\n                disabled={disabled}\n              />\n              <AuxErrorLabel\n                label=\"Owner:\"\n                errors={read(this.props.data, 'errors.owner', [])}\n              />\n            </div>\n\n            <label>Account:</label>\n            <div className=\"form-group\">\n              <Select\n                name=\"account\"\n                value={read(this.props.data, 'form.account', '')}\n                disabled={ownersLoading || disabled}\n                clearable={false}\n                searchable={false}\n                options={read(this.props.data, 'accountsLookup.options', [])}\n                onChange={this.handleInput.bind(this, 'account')} />\n              <AuxErrorLabel\n                label=\"Owner:\"\n                errors={read(this.props.data, 'errors.account', [])}\n              />\n            </div>\n\n            <Input type=\"text\"\n                   className=\"account-create-description\"\n                   label=\"Title:\"\n                   placeholder=\"Title\"\n                   name=\"title\"\n                   disabled={disabled}\n                   value={read(this.props.data, 'form.title', '')}\n                   errors={read(this.props.data, 'errors.title', [])}\n                   onChange={this.handleInput.bind(this, 'title')} />\n\n            <Input type=\"textarea\"\n                   className=\"account-create-description\"\n                   label=\"Description:\"\n                   placeholder=\"Description\"\n                   name=\"description\"\n                   disabled={disabled}\n                   value={read(this.props.data, 'form.description', '')}\n                   errors={read(this.props.data, 'errors.description', [])}\n                   onChange={this.handleInput.bind(this, 'description')} />\n          </form>\n        </BS.Modal.Body>\n        <BS.Modal.Footer>\n          <BS.Button onClick={this.onHide.bind(this)}>Cancel</BS.Button>\n          <ButtonLoader loading={read(this.props.data, 'loading', false)}\n                        type=\"submit\"\n                        bsStyle=\"primary\"\n                        icon={<BS.Glyphicon glyph=\"plus\" />}\n                        disabled={disabled}\n                        onClick={this.handleSubmit.bind(this)}>\n            Add\n          </ButtonLoader>\n        </BS.Modal.Footer>\n      </BS.Modal>\n    );\n  }\n}\n\nconst mapStateToProps = ({ app }) => ({\n  ui: app.ui.bookmarkAccount,\n  data: app.data.bookmarkAccount\n});\n\nexport default connect(mapStateToProps)(Add3rdPartyAccountModal);\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/modals/Add3rdPartyAccountModal.js\n **/","/**\n * Created by andrew on 15/02/16.\n */\nimport React, { PropTypes } from \"react\";\nimport { Button, Glyphicon } from \"react-bootstrap\";\nimport Spinner from \"react-loader\";\n\nclass ButtonLoader extends React.Component {\n  static propTypes = {\n    icon: PropTypes.node,\n    loading: PropTypes.bool,\n    spinConfig: PropTypes.object,\n    spinColorDark: PropTypes.string,\n    spinColorLight: PropTypes.string,\n    children: PropTypes.node,\n    onClick: PropTypes.func.isRequired,\n    style: PropTypes.object\n  };\n\n  static defaultProps = {\n    icon: <Glyphicon glyph=\"heart\" />,\n    loading: false,\n    spinConfig: {\n      lines: 10,\n      length: 4,\n      width: 2,\n      radius: 3\n    },\n    spinColorDark: \"#444\",\n    spinColorLight: \"#fff\",\n    children: <span>Submit</span>,\n    style: {}\n  };\n\n  renderIcon () {\n    let icon;\n\n    if (this.props.loading) {\n      let spinColor = (!this.props.bsStyle || this.props.bsStyle === \"default\")\n        ? this.props.spinColorDark\n        : this.props.spinColorLight;\n\n      icon = <Spinner {...this.props.spinConfig} color={spinColor} loaded={false} />;\n    } else {\n      icon = this.props.icon;\n    }\n\n    return (\n      <div style={{\n        position: \"relative\",\n        display: \"inline-block\",\n        marginRight: \"6px\",\n        width: \"10px\",\n        height: \"10px\",\n        top: \"1px\"\n      }}>\n        {icon}\n      </div>\n    );\n  }\n\n  render () {\n    return (\n      <Button\n        onClick={this.props.onClick}\n        disabled={this.props.disabled || this.props.loading}\n        bsStyle={this.props.bsStyle}\n        className={this.props.className}\n        type={this.props.type}\n        style={this.props.style}\n        bsSize={this.props.bsSize}>\n        {this.renderIcon()} {this.props.children}\n      </Button>\n    );\n  }\n}\n\nexport default ButtonLoader;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controls/bootstrap/ButtonLoader.js\n **/","/**\n * Created by andrew on 15/02/16.\n */\nimport React, { PropTypes } from \"react\";\nimport { Input, Glyphicon } from \"react-bootstrap\";\n\nclass AuthInput extends React.Component {\n  static propTypes = {\n    label: PropTypes.string,\n    value: PropTypes.string,\n    errors: PropTypes.array\n  };\n\n  static defaultProps = {\n    label: '',\n    value: null,\n    errors: []\n  };\n\n  handleInput (ev) {\n    this.props.onChange(ev.target.value);\n  }\n\n  renderErrorList () {\n\n    if (this.props.errors.length) {\n      return (\n        <div className=\"auth-error-message has-error\">\n          {this.props.errors.map((err, i) => {\n            return (\n              <p className=\"control-label inline-error-item\"\n                 style={{paddingLeft: \"20px\", position: \"relative\", marginBottom: \"28px\"}}\n                 key={i}>\n\n                <Glyphicon glyph=\"exclamation-sign\"\n                           style={{\n                             position: \"absolute\",\n                             left: 0,\n                             top: 2\n                           }}\n                /> {this.props.label} {err}\n              </p>\n            );\n          })}\n        </div>\n      );\n    } else {\n      return <span />;\n    }\n  }\n\n  render () {\n    return (\n      <div>\n        <Input {...this.props}\n          bsStyle={(this.props.errors.length) ? \"error\" : null}\n          onChange={this.handleInput.bind(this)} />\n        {this.renderErrorList()}\n      </div>\n    );\n  }\n}\n\nexport default AuthInput;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controls/bootstrap/Input.js\n **/","/**\n * Created by andrew on 15/02/16.\n */\nimport React, { PropTypes } from \"react\";\nimport { Glyphicon } from \"react-bootstrap\";\n\n\nclass AuxErrorLabel extends React.Component {\n\n  static propTypes = {\n    label: PropTypes.string,\n    errors: PropTypes.array\n  };\n\n  static defaultProps = {\n    label: '',\n    errors: []\n  };\n  \n//        <Input {...this.props}\n//   bsStyle={(this.props.errors.length) ? \"error\" : null}\n// onChange={this.handleInput.bind(this)} />\n  render () {\n    const { errors } = this.props;\n\n    if (errors.length) {\n      return (\n        <div className='has-error'>\n          { errors.map((err, i) => {\n            return (\n              <p className=\"control-label inline-error-item\"\n                 style={{paddingLeft: \"20px\", position: \"relative\", marginBottom: \"28px\"}}\n                 key={i}>\n\n                <Glyphicon glyph=\"exclamation-sign\"\n                           style={{\n                             position: \"absolute\",\n                             left: 0,\n                             top: 2\n                           }}\n                /> {this.props.label} {err}\n              </p>\n            );\n          })}\n        </div>\n      );\n    } else {\n      return <span />;\n    }\n  }\n}\n\nexport default AuxErrorLabel;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controls/bootstrap/AuxErrorLabel.js\n **/","/**\n * Created by andrew on 20/02/16.\n */\nimport React, { PropTypes } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport * as BS from \"react-bootstrap\";\nimport Input from \"../../controls/bootstrap/Input\";\nimport ButtonLoader from \"../../controls/bootstrap/ButtonLoader\";\n//import { PageHeader, OverlayTrigger, Modal, Tooltip, Grid, Col, Row, Nav, NavItem, ButtonGroup, Button, Table } from \"react-bootstrap\";\n\nimport { Link, IndexLink} from \"react-router\";\nimport read from '../../utils/readProp';\n\nimport { accountCreateFormUpdate, accountCreateError } from '../../actions/entities';\n\nconst formValidation = (payload) => ['title', 'balance', 'description'].reduce((memo, prop) => {\n  let result = [];\n  const value = (payload[prop] || '').replace(/(^\\s+)|(\\s+$)/g, '');\n\n  switch (prop) {\n    case 'title':\n    case 'balance':\n      if (/^$/.test(value)) {\n        result.push('required');\n      }\n  }\n\n  switch (prop) {\n    case 'balance':\n      if (!/\\d+/.test(value)) {\n        result.push('need to be a number');\n      }\n  }\n\n  switch (prop) {\n    case 'description':\n      if (value.length > 400) {\n        result.push('need to less than 400 symbols long');\n      }\n\n  }\n  if (result.length) {\n    memo[prop] = result;\n    memo.hasErrors = true;\n  }\n  return memo;\n}, {});\n\nexport class NewAccountModal extends React.Component {\n\n  static propTypes = {\n    action: PropTypes.func,\n    account: PropTypes.object.isRequired\n  };\n  \n  handleSubmit(event) {\n    event.preventDefault();\n\n    const payload = { ...this.props.account.form };\n\n    const validationErrors = formValidation(payload);\n    if (validationErrors.hasErrors) {\n      this.props.dispatch(accountCreateError(validationErrors));\n      return;\n    }\n\n    const { action } = this.props;\n\n    if (action) {\n      action(payload);\n    }\n  }\n\n  handleInput(key, val) {\n      this.props.dispatch(accountCreateFormUpdate(key, val));\n  }\n\n  render() {\n\n    const disabled = (\n      this.props.account.loading\n    );\n\n    const actionLabel = 'Create';\n\n    return (<BS.Modal show={this.props.show} onHide={this.props.onHide} key={0}>\n      <BS.Modal.Header closeButton>\n        <BS.Modal.Title>New Account</BS.Modal.Title>\n      </BS.Modal.Header>\n      <BS.Modal.Body>\n        <form className='account-create-form clearfix'\n              onSubmit={this.handleSubmit.bind(this)}>\n\n          <Input type=\"text\"\n                 className=\"account-create-title\"\n                 label=\"Title\"\n                 placeholder=\"Title\"\n                 name=\"title\"\n                 disabled={disabled}\n                 value={read(this.props.account, 'form.title', '')}\n                 errors={read(this.props.account, 'errors.title', [])}\n                 onChange={this.handleInput.bind(this, \"title\")}\n          />\n\n          <Input type=\"text\"\n                 className=\"account-create-balance\"\n                 label=\"Balance\"\n                 placeholder=\"Balance\"\n                 name=\"balance\"\n                 addonBefore={\n                 (<BS.Glyphicon glyph=\"usd\" />)\n                 }\n                 addonAfter=\".00\"\n                 disabled={disabled}\n                 value={read(this.props.account, 'form.balance', '')}\n                 errors={read(this.props.account, 'errors.balance', [])}\n                 onChange={this.handleInput.bind(this, 'balance')}\n          />\n\n          <Input type=\"textarea\"\n                 className=\"account-create-description\"\n                 label=\"Description\"\n                 placeholder=\"Description\"\n                 name=\"description\"\n                 disabled={disabled}\n                 value={read(this.props.account, 'form.description', '') || ''}\n                 errors={read(this.props.account, 'errors.description', [])}\n                 onChange={this.handleInput.bind(this, 'description')}\n           />\n\n\n        </form>\n\n      </BS.Modal.Body>\n      <BS.Modal.Footer>\n        <BS.Button onClick={this.props.onHide}>Cancel</BS.Button>\n        <ButtonLoader loading={read(this.props.account, 'loading', false)}\n                      type=\"submit\"\n                      bsStyle=\"primary\"\n                      icon={<BS.Glyphicon glyph=\"plus\" />}\n                      disabled={disabled}\n                      onClick={this.handleSubmit.bind(this)}\n          >\n          {actionLabel}\n        </ButtonLoader>\n      </BS.Modal.Footer>\n    </BS.Modal>);\n  }\n}\n\nexport default connect()(NewAccountModal);\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/modals/NewAccountModal.js\n **/","/**\n * Created by andrew on 20/02/16.\n */\nimport React, { PropTypes } from \"react\";\nimport * as BS from 'react-bootstrap';\nimport { PageHeader, OverlayTrigger, Modal, Tooltip, Grid, Col, Row, Nav, NavItem, ButtonGroup, Button, Table } from \"react-bootstrap\";\nimport { Link, IndexLink} from \"react-router\";\nimport { connect } from \"react-redux\";\nimport Select from \"react-select\";\n\nexport class RemoveAccountBookmarkModal extends React.Component {\n\n  static propTypes = {\n    action: PropTypes.func,\n    account: PropTypes.object\n  };\n\n  handleAction(evt) {\n    evt.preventDefault();\n    const { action } = this.props;\n    const { account } = this.props;\n    const {\n      id,\n      accountId\n      } = account || {};\n\n    if (action) {\n      action(id || accountId);\n    }\n  }\n\n  render() {\n    const { account } = this.props;\n\n    const { title: titleRaw,\n      description: descriptionRaw,\n      balance: balanceRaw,\n      id,\n      accountId } = account || {};\n\n    const entityId = id || accountId;\n\n    const title = titleRaw || '[No title]';\n    const balance = ((balanceRaw > 0 && balanceRaw < 1) ? '$0' : '$') + Number(balanceRaw).toFixed(2);\n    const description = descriptionRaw || '[No description]';\n\n    return (<Modal show={this.props.show} onHide={this.props.onHide} key={0}>\n      <Modal.Header closeButton>\n        <Modal.Title>Remove Account Bookmark</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n\n        <form className=\"form-horizontal\">\n          <BS.FormControls.Static label=\"Title\" labelClassName=\"col-xs-2\" wrapperClassName=\"col-xs-10\">{ title }</BS.FormControls.Static>\n          <BS.FormControls.Static label=\"Balance\" labelClassName=\"col-xs-2\" wrapperClassName=\"col-xs-10\">{ balance }</BS.FormControls.Static>\n          <BS.FormControls.Static label=\"Description\" labelClassName=\"col-xs-2\" wrapperClassName=\"col-xs-10\">{ description }</BS.FormControls.Static>\n        </form>\n\n      </Modal.Body>\n      <Modal.Footer>\n        <Button onClick={this.props.onHide}>Cancel</Button>\n        <Button bsStyle=\"danger\" eventKey={ entityId } onClick={this.handleAction.bind(this)}>Remove</Button>\n      </Modal.Footer>\n    </Modal>);\n  }\n}\n\nexport default RemoveAccountBookmarkModal;\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/modals/RemoveAccountModal.js\n **/","/**\n * Created by andrew on 17/02/16.\n */\nimport React, { PropTypes } from \"react\";\nimport { Panel, Col } from \"react-bootstrap\";\n\nclass IndexPanel extends React.Component {\n  static propTypes = {\n    bsStyle: PropTypes.string,\n    header: PropTypes.string,\n    children: PropTypes.node\n  };\n\n  static defaultProps = {\n    bsStyle: \"info\",\n    children: <span />\n  };\n\n  render () {\n    return (\n      <Col sm={6}>\n        <Panel {...this.props} />\n      </Col>\n    );\n  }\n}\n\nexport default IndexPanel;\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/partials/IndexPanel.js\n **/","/**\n * Created by andrew on 3/22/16.\n */\nimport React from 'react';\n\nexport const moneyText = (amount) => {\n\n  if (Number.isNaN(Number(amount))) {\n    return '';\n  }\n  const absNum = Math.abs(Number(amount) / 100);\n  if (absNum < 0) {\n    return `$(${absNum.toFixed(2)})`;\n  }\n  return `$${absNum.toFixed(2)}`;\n};\n\nexport const Money = ({ amount }) => {\n\n  if (Number.isNaN(Number(amount))) {\n    return (<span />);\n  }\n  const absNum = Math.abs(Number(amount) / 100);\n  if (absNum < 0) {\n    return (<span className=\"text-danger\">($${ absNum.toFixed(2) })</span>)\n  }\n  return (<span>${ absNum.toFixed(2) }</span>);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/Money.js\n **/","/**\n * Created by andrew on 12/02/16.\n */\nimport React from \"react\";\n//import { PageHeader } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\n\nimport { PageHeader, OverlayTrigger, Tooltip, Grid, Col, Row, Nav, NavItem, ButtonGroup, Button, Table } from \"react-bootstrap\";\nimport * as BS  from \"react-bootstrap\";\nimport Spinner from \"react-loader\";\nimport Select from \"react-select\";\nimport Input from \"../controls/bootstrap/Input\";\nimport { Money, moneyText } from '../components/Money';\nimport { TransfersTable } from '../components/TransfersTable';\n\nimport { Link, IndexLink} from \"react-router\";\n\n\nimport IndexPanel from \"./../components/partials/IndexPanel\";\nimport * as Modals from './modals';\nimport * as A from '../actions/entities';\nimport read from '../utils/readProp';\n\nimport { blocked } from '../utils/blockedExecution';\n\n\nconst resetModals = {\n  showAccountModal: false,\n  unsaved: false\n};\n\nexport class Account extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { ...resetModals };\n\n    const ensureTransfers = this.ensureTransfers.bind(this);\n    const ensureAccounts = this.ensureAccounts.bind(this);\n\n    this.ensureTransfers = blocked(ensureTransfers, true);\n    this.ensureAccounts = blocked(ensureAccounts, true);\n  }\n\n  ensureTransfers(props, cb) {\n    const forceFetch = !cb;\n    if (forceFetch) {\n      cb = props;\n      props = this.props;\n    }\n\n    const { dispatch, params, transfers } = props;\n\n    if (!forceFetch && !params) {\n      return cb();\n    }\n\n    const { accountId } = params;\n    if (!forceFetch && (!accountId || transfers[accountId])) {\n      return cb();\n    }\n\n    dispatch(A.getTransfers(accountId)).then(cb, cb);\n  }\n\n  ensureAccounts(props, cb) {\n    const forceFetch = !cb;\n    if (forceFetch) {\n      cb = props;\n      props = this.props;\n    }\n\n    const { dispatch, params, data } = props;\n\n    if (!forceFetch && (!params || !data || !data.accounts)) {\n      return cb();\n    }\n\n    const { accountId } = params;\n\n    if (!forceFetch && data.accounts.own && data.accounts.own.length && data.entities[accountId]) {\n      return cb();\n    }\n\n    if (!forceFetch && (!props.auth || !props.auth.user || !props.auth.user.attributes)) {\n      return cb();\n    }\n\n    const {\n      id: customerId\n    } = props.auth.user.attributes;\n\n    Promise.all([\n      dispatch(A.fetchOwnAccounts(customerId)),\n      dispatch(A.fetchAccount(accountId)),\n    ]).then(cb, cb);\n  }\n\n  // shouldComponentUpdate(nextProps) {\n  //   return (nextProps.params.accountId !== this.props.params.accountId) || (nextProps.app !== this.props.app);\n  // }\n\n  componentWillMount() {\n    this.ensureAccounts(this.props);\n    this.ensureTransfers(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.ensureAccounts(nextProps);\n    this.ensureTransfers(nextProps);\n  }\n\n  createAccountModal() {\n    this.setState({\n      showAccountModal: true\n    });\n  }\n\n  createAccountModalConfirmed() {\n    // debugger;\n  }\n\n\n  close() {\n    this.setState({\n      ...resetModals\n    });\n  }\n\n  handleInput(key, value) {\n    this.props.dispatch(A.makeTransferFormUpdate(key, value));\n  }\n\n  initiateTransfer(){\n    const { dispatch, params, transfer } = this.props;\n    const { accountId } = params;\n    dispatch(A.makeTransfer(accountId, transfer.form ))\n      .then(() => new Promise((rs) => {\n          setTimeout(() => {\n            this.ensureAccounts();\n            this.ensureTransfers();\n            rs();\n          }, 1500);\n        })\n      );\n  }\n\n  render () {\n\n    const { showAccountModal } = this.state;\n    const { params } = this.props;\n    const { loading, errors } = this.props.ui;\n    const { entities, accounts } = this.props.data;\n    const { accountId } = params;\n\n    const  account = entities[accountId];\n\n    const spinnerResult = (<h2 key=\"0\">Loading..</h2>);\n\n    if (loading) {\n      return spinnerResult;\n    }\n\n    if (!account) {\n      if (errors.length) {\n        return (<h2>Error loading specified account</h2>);\n      } else {\n        return spinnerResult;\n      }\n    }\n\n    const transferTo = [].concat(accounts.own.reduce((memo, item, idx) => {\n      const { balance, title, accountId: itemAccountId } = item;\n\n      if (itemAccountId != accountId) {\n        memo.push({\n          value: itemAccountId ,\n          label: `${title}: ${ moneyText(balance) }`\n        });\n      }\n      return memo;\n    }, []),\n      accounts.other.reduce((memo, item, idx) => {\n      if (!((item.id == accountId) || (item.accountId == accountId))) {\n        memo.push({\n          value: item.accountId || item.id,\n          label: `${item.title}${ item.description ? ': ' + item.description.substr(0, 10): '' }`\n        });\n      }\n      return memo;\n    }, []));\n\n    const { title: titleRaw, description: descriptionRaw, balance } = account;\n\n    const title = titleRaw || '—';\n    const description = descriptionRaw || '—';\n\n    const transferDisabled = this.props.transfer.loading;\n\n    return (\n      <div key={accountId}>\n        <PageHeader>\n          Account\n          <Nav pullRight={true}>\n            <ButtonGroup>\n              <Button bsStyle={\"link\"} onClick={this.createAccountModal.bind(this)}>Edit</Button>\n            </ButtonGroup>\n          </Nav>\n        </PageHeader>\n\n        <Row>\n          <IndexPanel header=\"Account Info:\">\n\n            <Row>\n              <Col xs={4}>Title:</Col>\n              <Col xs={8}><strong>{ title }</strong></Col>\n            </Row>\n\n            <Row>\n              <Col xs={4}>Balance:</Col>\n              <Col xs={8}><strong><Money amount={balance} /></strong></Col>\n            </Row>\n\n            <Row>\n              <Col xs={4}>Description:</Col>\n              <Col xs={8}><strong>{ description }</strong></Col>\n            </Row>\n\n          </IndexPanel>\n\n        </Row>\n        <Row>\n          <Col xs={12}>\n            <h3>You can transfer money to accounts:</h3>\n          </Col>\n        </Row>\n        <Row>\n          <Col sm={4}>\n            <label>Transfer To:</label>\n            <Select\n              value={read(this.props.transfer, 'form.account', '')}\n              clearable={true}\n              options={transferTo}\n              disabled={transferDisabled}\n              onChange={this.handleInput.bind(this, 'account')}\n            />\n          </Col>\n          <Col sm={3}>\n            <Input type=\"text\"\n                   className=\"\"\n                   label=\"Amount:\"\n                   placeholder=\"Amount\"\n                   name=\"amount\"\n                   addonBefore={\n                 (<BS.Glyphicon glyph=\"usd\" />)\n                 }\n                   addonAfter=\".00\"\n                   disabled={transferDisabled}\n                   value={read(this.props.transfer, 'form.amount', '')}\n                   errors={read(this.props.transfer, 'errors.amount', []) || []}\n                   onChange={this.handleInput.bind(this, 'amount')}\n            />\n            </Col>\n          <Col sm={3}>\n            <Input type=\"textarea\"\n                   className=\"\"\n                   label=\"Description:\"\n                   placeholder=\"Description\"\n                   name=\"description\"\n                   disabled={transferDisabled}\n                   value={read(this.props.transfer, 'form.description', '') || ''}\n                   errors={read(this.props.transfer, 'errors.description', []) || []}\n                   onChange={this.handleInput.bind(this, 'description')}\n            />\n          </Col>\n          <Col sm={2}>\n            <br/>\n            <Button bsStyle=\"primary\"\n                    disabled={transferDisabled}\n                    onClick={!transferDisabled && this.initiateTransfer.bind(this)}>Transfer</Button>\n          </Col>\n        </Row>\n\n        <Row>\n          <Col xs={12}>\n            <h3>Transfer History:</h3>\n          </Col>\n        </Row>\n\n        <TransfersTable forAccount={accountId} transfers={ this.props.transfers[accountId] } />\n\n        <Modals.NewAccountModal show={showAccountModal}\n                                action={this.createAccountModalConfirmed.bind(this)}\n                                account={{ loading: true }}\n                                onHide={this.close.bind(this)}\n                                key={0} />\n\n\n      </div>\n\n    );\n  }\n}\n\nexport default connect(({\n  app,\n  router\n  }) => ({\n    app,\n  auth: app.auth,\n  data: app.data,\n  transfers: app.data.transfers,\n  ui: app.ui.account,\n  transfer: app.ui.transfersMake,\n  router\n}))(Account);\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/Account.js\n **/","/**\n * Created by andrew on 3/22/16.\n */\nimport React from \"react\";\nimport Spinner from \"react-loader\";\nimport * as BS  from \"react-bootstrap\";\nimport TimeAgo from 'react-timeago';\n\nimport { Money } from './Money';\nimport AccountInfo from './AccountInfo';\n\nexport class TransfersTable extends React.Component {\n\n  preprocessItems(input, currentAccountId) {\n    return input\n      .sort((a, b) => ((a.date - b.date)))\n      .filter(({ entryType, toAccountId, fromAccountId}) => ((entryType !=='transaction') || (fromAccountId === currentAccountId) || (toAccountId === currentAccountId)))\n      .reduce(({\n        items, balance\n      }, v) => {\n        if (v.entryType == 'account') {\n          balance = v.initialBalance;\n        } else if (v.entryType == 'transaction') {\n          const isOriginating = v.fromAccountId == currentAccountId;\n          balance += (isOriginating ? -1 : 1) * v.amount;\n        }\n        v.balance = balance;\n        items.push(v);\n        return { items, balance };\n      }, {\n        items: [],\n        balance: 0\n      }).items\n      .sort((a, b) => (-(a.date - b.date)))\n  }\n\n  render() {\n    const { transfers, forAccount } = this.props;\n    const { loading, data, errors } = transfers || {};\n    \n    if (!transfers || loading) {\n      return (<h2><Spinner loaded={false} /> Loading..</h2>);\n    }\n\n    if (Object.keys(errors).length) {\n      return (<div className=\"text-danger\">Errors..</div>);\n    }\n\n    const currentAccountId = forAccount;\n\n    const transfersMarkup = data.length ?\n      this.preprocessItems(data, currentAccountId)\n        .map(({\n          entryType,\n          amount,\n          fromAccountId,\n          toAccountId,\n          transactionId,\n          description = '—',\n          date = null,\n          status = '—',\n          balance,\n          initialBalance = null\n        }) => {\n\n          const transferTimestamp = new Date(date);\n          const timeAgoTitle = transferTimestamp.toLocaleDateString() + ' ' + transferTimestamp.toLocaleTimeString();\n\n          if (entryType == 'account') {\n            return (<tr>\n              <td><TimeAgo date={date} title={ timeAgoTitle } /></td>\n              <td colSpan=\"3\">Account created</td>\n              <td><Money amount={ initialBalance } /></td>\n              <td>{ description }</td>\n              <td>{ status || '—' }</td>\n            </tr>);\n          }\n\n          const isOriginating = fromAccountId == currentAccountId;\n          const directionMarkup = isOriginating ? 'Debit' : 'Credit';\n          const counterAccountMarkup = isOriginating ?\n            <AccountInfo accountId={ toAccountId } /> :\n            <AccountInfo accountId={ fromAccountId } />;\n\n          return (<tr key={ transactionId }>\n            <td><TimeAgo date={date} title={ timeAgoTitle } /></td>\n            <td>{ directionMarkup }</td>\n            <td>{ counterAccountMarkup }</td>\n            <td><Money amount={ amount } /></td>\n            <td><Money amount={ balance } /></td>\n            <td>{ description || '—' }</td>\n            <td>{ status || '—' }</td>\n          </tr>);\n        }) : (<tr>\n        <td colSpan={6}>No transfers for this account just yet.</td>\n      </tr>);\n\n    return (\n      <BS.Table striped bordered condensed hover>\n        <thead>\n        <tr>\n          <th>Date</th>\n          <th>Type</th>\n          <th>Other Account</th>\n          <th>Amount</th>\n          <th>Balance</th>\n          <th>Description</th>\n          <th>Status</th>\n        </tr>\n        </thead>\n        <tbody>\n        { transfersMarkup }\n        </tbody>\n      </BS.Table>\n    );\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/TransfersTable.js\n **/","/**\n * Created by andrew on 3/22/16.\n */\nimport React from \"react\";\nimport { connect } from 'react-redux';\nimport Spinner from \"react-loader\";\n// import * as BS  from \"react-bootstrap\";\nimport * as A from '../actions/entities';\nimport { Route, IndexRoute, Link, IndexLink } from \"react-router\";\n\n\n// import { Money } from '../components/Money';\n\nexport class AccountInfo extends React.Component {\n  componentWillMount() {\n    this.ensureData(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.ensureData(nextProps);\n  }\n\n  ensureData({ dispatch, entities, accountId }) {\n    if (entities[accountId]) {\n      return;\n    }\n    dispatch(A.fetchAccount(accountId));\n  }\n\n  render() {\n    const { entities, accountId } = this.props;\n\n    const account = entities[accountId];\n\n    if (!account) {\n      return (<Link to={ `/account/${accountId}` }>{ accountId } <Spinner loaded={false} /></Link>)\n    }\n\n    const { title } = account;\n\n    return (<Link to={ `/account/${accountId}` }>{ title }</Link>);\n  }\n}\n\nexport default connect(({ app }) => ({\n  entities: app.data.entities\n}))(AccountInfo);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/AccountInfo.js\n **/","/**\n * Created by andrew on 8/17/16.\n */\n\nexport const blocked = (fn, useCb) => {\n  let isBlocked = false;\n  return (...args) => {\n    if (isBlocked) {\n      return;\n    }\n    //noinspection JSUnusedAssignment\n    isBlocked = true;\n    const cb = () => {\n      isBlocked = false;\n    };\n    const result = useCb ? fn(...(args.concat([cb]))) : fn(...args);\n    if (!useCb) {\n      cb();\n    }\n    return result;\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/blockedExecution.js\n **/","/**\n * Created by andrew on 12/02/16.\n */\nimport React from \"react\";\nimport { PageHeader } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\n\n//import ButtonLoader from \"./ButtonLoader\";\nimport * as BS from \"react-bootstrap\";\n//import ButtonLoader from \"../controls/bootstrap/ButtonLoader\";\n\n\nimport {pushState} from \"redux-router\";\n\n\n//export {bootstrap, materialUi} from \"./views\";\n\n\n// bootstrap theme\n//import { EmailSignInForm } from \"redux-auth/bootstrap-theme\";\nimport EmailSignInForm from \"../controls/bootstrap/EmailSignInForm\";\n\nexport class SignIn extends React.Component {\n\n  checkRedirect(props) {\n    if (props.auth.user.isSignedIn) {\n      props.dispatch(pushState(null, props.location.query.next));\n      //// redirect to login and add next param so we can redirect again after login\n      //const redirectAfterLogin = this.props.location.pathname;\n      //this.props.dispatch(pushState(null, `/signin?next=${redirectAfterLogin}`));\n    }\n  }\n  componentWillMount() {\n    this.checkRedirect(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.checkRedirect(nextProps);\n\n  }\n\n  render () {\n    const signInProps = {\n      inputProps: {\n        password: {\n          className: 'hide hidden',\n          style: { display: 'none' },\n          value: null,\n          disabled: true\n        }\n      }\n    };\n\n    return (\n      <BS.Well>\n        <PageHeader>Sign In</PageHeader>\n        <EmailSignInForm {...this.props} />\n      </BS.Well>\n    );\n  }\n}\nexport default connect(({\n  //dispatch,\n    routes,\n    app\n  }) => ({\n  //dispatch,\n    routes,\n    auth: app.auth\n}))(SignIn);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/SignIn.js\n **/","/**\n * Created by andrew on 15/02/16.\n */\nimport React, {PropTypes} from \"react\";\nimport { connect } from \"react-redux\";\nimport read from '../../utils/readProp';\n\nimport * as BS from \"react-bootstrap\";\nimport Input from \"./Input\";\nimport ButtonLoader from \"./ButtonLoader\";\nimport AuxErrorLabel from './AuxErrorLabel';\n\nimport { emailSignInFormUpdate, emailSignIn } from \"../../actions/signIn\";\n\n/*\n <Input type=\"password\"\n label=\"Password\"\n className=\"email-sign-in-password\"\n placeholder=\"Password\"\n disabled={disabled}\n value={this.props.auth.getIn([\"emailSignIn\", this.getEndpoint(), \"form\", \"password\"])}\n errors={this.props.auth.getIn([\"emailSignIn\", this.getEndpoint(), \"errors\", \"password\"])}\n onChange={this.handleInput.bind(this, \"password\")}\n {...this.props.inputProps.password} />\n  */\n\nclass EmailSignInForm extends React.Component {\n\n  static propTypes = {\n    endpoint: PropTypes.string,\n    inputProps: PropTypes.shape({\n      email: PropTypes.object,\n      password: PropTypes.object,\n      submit: PropTypes.object\n    })\n  };\n\n  static defaultProps = {\n    inputProps: {\n      email: {},\n      password: {},\n      submit: {}\n    }\n  };\n\n  handleInput (key, val) {\n    this.props.dispatch(emailSignInFormUpdate(key, val));\n  }\n\n  handleSubmit (event) {\n    event.preventDefault();\n    let formData = { ...this.props.auth.signIn.form };\n    this.props.dispatch(emailSignIn(formData));\n  }\n\n  render () {\n\n    try {\n    const disabled = (\n      this.props.auth.user.isSignedIn ||\n      this.props.auth.signIn.loading\n    );\n\n      //const error = read(this.props.auth, 'signIn.errors.email', null);\n      //debugger;\n      const formErrors = read(this.props.auth, 'signIn.errors.errors', '');\n\n\n      return (\n      <form className='redux-auth email-sign-in-form clearfix'\n            onSubmit={this.handleSubmit.bind(this)}>\n\n        <div className=\"form-group\" style={{\n            display: formErrors ? 'block' : 'none'\n            }}>\n          <AuxErrorLabel\n            label=\"Form:\"\n            errors={formErrors.length ? [formErrors] : [] }\n          />\n        </div>\n\n        <Input type=\"text\"\n               className=\"email-sign-in-email\"\n               label=\"Email\"\n               placeholder=\"Email\"\n               name=\"email\"\n               disabled={disabled}\n               value={read(this.props.auth, 'signIn.form.email', '')}\n               errors={read(this.props.auth, 'signIn.errors.email', [])}\n               onChange={this.handleInput.bind(this, \"email\")}\n          {...this.props.inputProps.email} />\n\n        <ButtonLoader loading={read(this.props.auth, 'signIn.loading', false)}\n                      type=\"submit\"\n                      icon={<BS.Glyphicon glyph=\"log-in\" />}\n                      className='email-sign-in-submit pull-right'\n                      disabled={disabled}\n                      onClick={this.handleSubmit.bind(this)}\n          {...this.props.inputProps.submit}>\n          Sign In\n        </ButtonLoader>\n      </form>\n    );\n    } catch (ex){\n      console.error('Render exception: ', ex);\n      return [' ERROR '];\n    }\n  }\n}\n\nexport default connect(({app}) => ({auth: app.auth}))(EmailSignInForm);\n\n\n/** WEBPACK FOOTER **\n ** ./src/controls/bootstrap/EmailSignInForm.js\n **/","/**\n * Created by andrew on 26/02/16.\n */\nimport {\n  setCurrentEndpointKey,\n  getCurrentEndpointKey,\n  persistUserData\n} from \"../utils/sessionStorage\";\n\nimport { entityReceived } from './entities';\nimport { storeCurrentEndpointKey } from \"./configure\";\n//import { parseResponse } from \"../utils/handleFetchResponse\";\n//import fetch from \"../utils/fetch\";\n\nimport { apiSignIn } from '../utils/api';\nimport { makeActionCreator } from '../utils/actions';\n\nimport T from '../constants/ACTION_TYPES';\n\n//import root from '../utils/root';\n\nexport const emailSignInFormUpdate = makeActionCreator(T.AUTH.SIGN_IN_FORM_UPDATE, 'key', 'value');\nexport const emailSignInStart = makeActionCreator(T.AUTH.SIGN_IN_START);\nexport const emailSignInComplete = makeActionCreator(T.AUTH.SIGN_IN_COMPLETE, 'user');\nexport const emailSignInError = makeActionCreator(T.AUTH.SIGN_IN_ERROR, 'error');\n\nexport function emailSignIn(body) {\n  return dispatch => {\n\n    dispatch(emailSignInStart());\n\n    return apiSignIn(body)\n      .then(function(data = {}) {\n        const { id } = data;\n        if (id ) {\n          dispatch(entityReceived(id, data));\n        }\n        return data;\n      })\n      .then((user) => {\n        persistUserData(user);\n        dispatch(emailSignInComplete(user));\n      })\n      .catch((errors) => {\n        // revert endpoint key to what it was before failed request\n        //setCurrentEndpointKey(prevEndpointKey);\n        //dispatch(storeCurrentEndpointKey(prevEndpointKey));\n        return dispatch(emailSignInError(errors));\n      });\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/signIn.js\n **/","/**\n * Created by andrew on 12/02/16.\n */\nimport React from \"react\";\n//import { PageHeader } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { pushState } from 'redux-router';\nimport read from '../utils/readProp';\n\nimport { PageHeader, OverlayTrigger, Tooltip, Row, ButtonGroup, Table } from \"react-bootstrap\";\nimport * as BS from \"react-bootstrap\";\nimport { Link, IndexLink} from \"react-router\";\n\n//import { EmailSignUpForm } from \"redux-auth/bootstrap-theme\"\nimport EmailSignUpForm from \"../controls/bootstrap/EmailSignUpForm\";\n\nexport class SignUp extends React.Component {\n\n  checkRedirect(props) {\n    if (props.isAuthenticated) {\n      // redirect to login and add next param so we can redirect again after login\n      // const redirectAfterLogin = props.location.pathname;\n      props.dispatch(pushState(null, `/`));\n    }\n  }\n\n  componentWillMount() {\n    this.checkRedirect(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.checkRedirect(nextProps);\n  }\n\n  render () {\n    return (\n      <div>\n        <PageHeader>\n          Register\n        </PageHeader>\n        <BS.Well>\n          <EmailSignUpForm />\n        </BS.Well>\n      </div>\n    );\n\n  }\n}\nexport default connect(({\n  routes,\n  app\n}) => ({routes,\n  isAuthenticated: read(app, 'auth.user.isSignedIn', false)\n}))(SignUp);\n\n\n/** WEBPACK FOOTER **\n ** ./src/views/SignUp.js\n **/","/**\n * Created by andrew on 15/02/16.\n */\nimport React, {PropTypes} from \"react\";\n//import auth from \"redux-auth\";\nimport Input from \"./Input\";\nimport ButtonLoader from \"./ButtonLoader\";\n//import { emailSignUpFormUpdate, emailSignUp } from \"redux-auth\";\nimport IndexPanel from \"./../../components/partials/IndexPanel\";\nimport { customerInfoMap } from '../../entities/formToPayloadMappers';\n\nimport read from '../../utils/readProp';\n\nimport { Glyphicon } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\n\nimport {emailSignUpFormUpdate, emailSignUp} from '../../actions/signUp';\n\n\nclass EmailSignUpForm extends React.Component {\n\n  getEndpoint () {\n    return (\n      this.props.endpoint ||\n      this.props.auth.getIn([\"configure\", \"currentEndpointKey\"]) ||\n      this.props.auth.getIn([\"configure\", \"defaultEndpointKey\"])\n    );\n  }\n\n  handleInput (key, val) {\n    this.props.dispatch(emailSignUpFormUpdate(key, val));\n  }\n\n  handleSubmit (event) {\n    event.preventDefault();\n\n    let formData = { ...this.props.auth.signUp.form };\n    this.props.dispatch(emailSignUp(customerInfoMap(formData)));\n  }\n\n  render () {\n\n    const disabled = (\n      this.props.auth.user.isSignedIn ||\n      this.props.auth.signUp.loading\n    );\n\n    return (\n      <form className='redux-auth email-sign-up-form clearfix'\n            onSubmit={this.handleSubmit.bind(this)}>\n\n        <IndexPanel header=\"basic\">\n\n          <Input type=\"text\"\n                 label=\"First name\"\n                 placeholder=\"First name\"\n                 className=\"email-sign-up-email\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.fname', '')}\n                 errors={read(this.props.auth, 'signUp.errors.fname', [])}\n                 onChange={this.handleInput.bind(this, \"fname\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"Last name\"\n                 placeholder=\"Last name\"\n                 className=\"email-sign-up-email\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.lname', '')}\n                 errors={read(this.props.auth, 'signUp.errors.lname', [])}\n                 onChange={this.handleInput.bind(this, \"lname\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"Email\"\n                 placeholder=\"Email\"\n                 className=\"email-sign-up-email\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.email', '')}\n                 errors={read(this.props.auth, 'signUp.errors.email', [])}\n                 onChange={this.handleInput.bind(this, \"email\")}\n          />\n\n\n        </IndexPanel>\n\n        <IndexPanel header=\"advanced\">\n          <Input type=\"text\"\n                 label=\"SSN\"\n                 placeholder=\"SSN\"\n                 className=\"email-sign-up-email\"\n                 bsSize=\"small\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.ssn', '')}\n                 errors={read(this.props.auth, 'signUp.errors.ssn', [])}\n                 onChange={this.handleInput.bind(this, \"ssn\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"Phone\"\n                 placeholder=\"Phone\"\n                 className=\"email-sign-up-email\"\n                 bsSize=\"small\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.phoneNumber', '')}\n                 errors={read(this.props.auth, 'signUp.errors.phoneNumber', [])}\n                 onChange={this.handleInput.bind(this, \"phoneNumber\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"Address 1\"\n                 placeholder=\"Address 1\"\n                 className=\"email-sign-up-email\"\n                 bsSize=\"small\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.address1', '')}\n                 errors={read(this.props.auth, 'signUp.errors.address1', [])}\n                 onChange={this.handleInput.bind(this, \"address1\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"Address 2\"\n                 placeholder=\"Address 2\"\n                 className=\"email-sign-up-email\"\n                 bsSize=\"small\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.address2', '')}\n                 errors={read(this.props.auth, 'signUp.errors.address2', [])}\n                 onChange={this.handleInput.bind(this, \"address2\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"City\"\n                 placeholder=\"City\"\n                 className=\"email-sign-up-email\"\n                 bsSize=\"small\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.city', '')}\n                 errors={read(this.props.auth, 'signUp.errors.city', {})}\n                 onChange={this.handleInput.bind(this, \"city\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"State\"\n                 placeholder=\"State\"\n                 className=\"email-sign-up-email\"\n                 bsSize=\"small\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.state', '')}\n                 errors={read(this.props.auth, 'signUp.errors.state', [])}\n                 onChange={this.handleInput.bind(this, \"state\")}\n          />\n\n          <Input type=\"text\"\n                 label=\"ZIP\"\n                 placeholder=\"ZIP\"\n                 className=\"email-sign-up-email\"\n                 bsSize=\"small\"\n                 disabled={disabled}\n                 value={read(this.props.auth, 'signUp.form.zip', '')}\n                 errors={read(this.props.auth, 'signUp.errors.zip', [])}\n                 onChange={this.handleInput.bind(this, \"zip\")}\n          />\n\n        </IndexPanel>\n\n\n\n        <ButtonLoader loading={read(this.props.auth, 'signUp.loading', false)}\n                      type=\"submit\"\n                      className=\"email-sign-up-submit pull-right\"\n                      icon={<Glyphicon glyph=\"send\" />}\n                      disabled={disabled}\n                      onClick={this.handleSubmit.bind(this)}\n        >\n          Sign Up\n        </ButtonLoader>\n      </form>\n    );\n\n  }\n}\n\nexport default connect(({app}) => ({auth: app.auth}))(EmailSignUpForm);\n\n\n/** WEBPACK FOOTER **\n ** ./src/controls/bootstrap/EmailSignUpForm.js\n **/","/**\n * Created by andrew on 21/02/16.\n */\nexport const customerInfoMap = ({\n  ssn,\n  address1,\n  address2,\n  city, //: \"Moscow\"\n  email, //: \"arevinsky@gmail.com\"\n  fname, //: \"Andrew\"\n  lname, //: \"Revinsky\"\n  phoneNumber, //: \"+79031570864\"\n  state, //: \"Kentucky\"\n  zip //: \"125315\"\n  }) => ({\n  \"name\": {\n    \"firstName\": fname,\n    \"lastName\": lname\n  },\n  email,\n  ssn,\n  \"phoneNumber\": phoneNumber,\n  \"address\": {\n    \"street1\": address1,\n    \"street2\": address2,\n    city,\n    state,\n    \"zipCode\": zip\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/entities/formToPayloadMappers.js\n **/","/**\n * Created by andrew on 11/03/16.\n */\nimport {\n  getEmailSignUpUrl\n} from \"../utils/sessionStorage\";\n\n\nimport { entityReceived } from './entities';\nimport { storeCurrentEndpointKey } from \"./configure\";\n//import { parseResponse } from \"../utils/handleFetchResponse\";\nimport { apiSignUp } from \"../utils/api\";\nimport { emailSignInFormUpdate } from './signIn';\nimport { push } from 'redux-router';\n\nimport T from '../constants/ACTION_TYPES';\n\nexport function emailSignUpFormUpdate(key, value) {\n  return { type: T.AUTH.SIGN_UP_FORM_UPDATE, key, value };\n}\n\nexport function emailSignUpStart() {\n  return { type: T.AUTH.SIGN_UP_START };\n}\n\nexport function emailSignUpComplete(user) {\n  return { type: T.AUTH.SIGN_UP_COMPLETE, user };\n}\n\nexport function emailSignUpError(errors) {\n  return { type: T.AUTH.SIGN_UP_ERROR, errors };\n}\n\nexport function emailSignUp(body) {\n  return dispatch => {\n    dispatch(emailSignUpStart());\n\n    return apiSignUp(body)\n      .then(({data}) => {\n        dispatch(emailSignUpComplete(data));\n        const { email } = body;\n        dispatch(emailSignInFormUpdate('email', email));\n        dispatch(push('/signin'));\n      })\n      .catch(({errors}) => dispatch(emailSignUpError(errors)));\n\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/signUp.js\n **/"],"sourceRoot":""}